webpackJsonp([18],{"5GvJ":function(e,t,n){t=e.exports=n("FZ+f")(!0),t.push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"sealview.vue",sourceRoot:""}])},"5zde":function(e,t,n){n("zQR9"),n("qyJz"),e.exports=n("FeBl").Array.from},Gu7T:function(e,t,n){"use strict";t.__esModule=!0;var a=n("c/Tr"),i=function(e){return e&&e.__esModule?e:{default:e}}(a);t.default=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return(0,i.default)(e)}},IdMF:function(e,t,n){"use strict";function a(e){n("KaKe"),n("IvIr")}Object.defineProperty(t,"__esModule",{value:!0});var i=n("Z7xc"),o=n("S777"),r=n("VU/8"),s=a,l=r(i.a,o.a,!1,s,"data-v-06d616bc",null);t.default=l.exports},IvIr:function(e,t,n){var a=n("oxA2");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n("rjj0")("2cc16fe1",a,!0,{})},KaKe:function(e,t,n){var a=n("5GvJ");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n("rjj0")("48f0cb02",a,!0,{})},NYaM:function(e,t,n){t=e.exports=n("FZ+f")(!0),t.push([e.i,".van-field__label{-webkit-box-flex:0;-webkit-flex:none;flex:none;box-sizing:border-box;width:30%;margin-right:12px;color:#646566;text-align:left;word-wrap:break-word;font-size:.92rem}.van-address-item__edit{width:0}.van-address-item{padding:2px}.van-address-list{padding:12px}.nut-checkboxgroup{padding:10px 0;margin-left:11px}.nut-checkbox.nut-checkbox-size-base .nut-checkbox-label{font-size:14px;margin-left:5px}.nut-checkboxgroup .checkbox-item{height:30px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;margin-right:20px;padding:5px 0;margin-top:10px}.section-nowechat{text-align:center;font-size:18px;padding-top:28px}.van-address-list__bottom{position:fixed;bottom:0;left:0;z-index:999;box-sizing:border-box;width:100%;padding:0 16px;padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom);background-color:#fff;display:none}.van-radio__icon{-webkit-box-flex:0;-webkit-flex:none;flex:none;height:1em;font-size:20px;line-height:1em;cursor:pointer;display:none}.van-address-item__edit{position:absolute;top:50%;right:16px;color:#969799;font-size:20px;-webkit-transform:translateY(-50%);transform:translateY(-50%);display:none}.van-address-list{box-sizing:border-box;height:100%;padding:1px}.van-address-item:not(:last-child){margin-bottom:1px;border-bottom:1px solid #f9f9f9}.van-address-item__value{padding-right:0}.van-address-item{padding:12px;background-color:#fff;border-radius:8px}","",{version:3,sources:["/Users/yunwisdom/Workspace/xdata-vuechat-service/src/assets/css/sealview.global.css"],names:[],mappings:"AAAA,kBACI,mBAAoB,AACpB,kBAAmB,AACnB,UAAW,AACX,sBAAuB,AACvB,UAAW,AACX,kBAAmB,AACnB,cAAe,AACf,gBAAiB,AACjB,qBAAsB,AACtB,gBAAmB,CACtB,AAED,wBACI,OAAW,CAEd,AAMD,kBACI,WAAa,CAGhB,AAED,kBAMI,YAAmB,CACtB,AAgBD,mBACI,eAAgB,AAChB,gBAAkB,CACrB,AAED,yDACI,eAAgB,AAChB,eAAiB,CACpB,AAED,kCACI,YAAa,AACb,oBAAqB,AACrB,qBAAsB,AACtB,oBAAqB,AACrB,aAAc,AACd,yBAA0B,AAC1B,2BAA4B,AAC5B,sBAAuB,AACvB,mBAAoB,AACpB,kBAAmB,AACnB,cAAe,AACf,eAAiB,CACpB,AAED,kBACI,kBAAmB,AACnB,eAAgB,AAChB,gBAAkB,CACrB,AAED,0BACI,eAAgB,AAChB,SAAU,AACV,OAAQ,AACR,YAAa,AACb,sBAAuB,AACvB,WAAY,AACZ,eAAgB,AAChB,gDAAiD,AACjD,2CAA4C,AAC5C,sBAAuB,AACvB,YAAc,CACjB,AAED,iBACI,mBAAoB,AACpB,kBAAmB,AACnB,UAAW,AACX,WAAY,AACZ,eAAgB,AAChB,gBAAiB,AACjB,eAAgB,AAChB,YAAc,CACjB,AAED,wBACI,kBAAmB,AACnB,QAAS,AACT,WAAY,AACZ,cAAe,AACf,eAAgB,AAChB,mCAAsC,AACtC,2BAA8B,AAC9B,YAAc,CACjB,AAED,kBACI,sBAAuB,AACvB,YAAa,AACb,WAAyB,CAC5B,AAED,mCACI,kBAAmB,AACnB,+BAAiC,CACpC,AAED,yBACI,eAAmB,CACtB,AAED,kBACI,aAAc,AACd,sBAAuB,AACvB,iBAAmB,CACtB",file:"sealview.global.css",sourcesContent:[".van-field__label {\n    -webkit-box-flex: 0;\n    -webkit-flex: none;\n    flex: none;\n    box-sizing: border-box;\n    width: 30%;\n    margin-right: 12px;\n    color: #646566;\n    text-align: left;\n    word-wrap: break-word;\n    font-size: 0.92rem;\n}\n\n.van-address-item__edit {\n    width: 0px;\n    display: none;\n}\n\n.van-address-item__value {\n    padding-right: 0px;\n}\n\n.van-address-item {\n    padding: 2px;\n    background-color: #fff;\n    border-radius: 8px;\n}\n\n.van-address-list {\n    box-sizing: border-box;\n    height: 100%;\n    padding-top: 12px;\n    padding-right: 12px;\n    padding-bottom: 12px;\n    padding-left: 12px;\n}\n\n.van-address-list__bottom {\n    position: fixed;\n    bottom: 0;\n    left: 0;\n    z-index: 999;\n    box-sizing: border-box;\n    width: 100%;\n    padding: 0 16px;\n    padding-bottom: constant(safe-area-inset-bottom);\n    padding-bottom: env(safe-area-inset-bottom);\n    background-color: #fff;\n    display: none;\n}\n\n.nut-checkboxgroup {\n    padding: 10px 0;\n    margin-left: 11px;\n}\n\n.nut-checkbox.nut-checkbox-size-base .nut-checkbox-label {\n    font-size: 14px;\n    margin-left: 5px;\n}\n\n.nut-checkboxgroup .checkbox-item {\n    height: 30px;\n    display: -webkit-box;\n    display: -webkit-flex;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n    -webkit-align-items: center;\n    -ms-flex-align: center;\n    align-items: center;\n    margin-right: 20px;\n    padding: 5px 0;\n    margin-top: 10px;\n}\n\n.section-nowechat {\n    text-align: center;\n    font-size: 18px;\n    padding-top: 28px;\n}\n\n.van-address-list__bottom {\n    position: fixed;\n    bottom: 0;\n    left: 0;\n    z-index: 999;\n    box-sizing: border-box;\n    width: 100%;\n    padding: 0 16px;\n    padding-bottom: constant(safe-area-inset-bottom);\n    padding-bottom: env(safe-area-inset-bottom);\n    background-color: #fff;\n    display: none;\n}\n\n.van-radio__icon {\n    -webkit-box-flex: 0;\n    -webkit-flex: none;\n    flex: none;\n    height: 1em;\n    font-size: 20px;\n    line-height: 1em;\n    cursor: pointer;\n    display: none;\n}\n\n.van-address-item__edit {\n    position: absolute;\n    top: 50%;\n    right: 16px;\n    color: #969799;\n    font-size: 20px;\n    -webkit-transform: translate(0, -50%);\n    transform: translate(0, -50%);\n    display: none;\n}\n\n.van-address-list {\n    box-sizing: border-box;\n    height: 100%;\n    padding: 1px 1px 1px 1px;\n}\n\n.van-address-item:not(:last-child) {\n    margin-bottom: 1px;\n    border-bottom: 1px solid #f9f9f9;\n}\n\n.van-address-item__value {\n    padding-right: 0px;\n}\n\n.van-address-item {\n    padding: 12px;\n    background-color: #fff;\n    border-radius: 8px;\n}"],sourceRoot:""}])},S777:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("keep-alive",[n("div",{staticStyle:{"margin-top":"0px"},attrs:{id:"content"}},[e.iswechat?n("header",{staticStyle:{"overflow-x":"hidden"},attrs:{id:"wx-header"}},[n("div",{staticClass:"center"},[n("router-link",{staticClass:"iconfont icon-left",attrs:{to:e.back,tag:"div"},on:{click:function(t){return e.$router.push("/app")}}},[n("span",[e._v("返回")])]),e._v(" "),n("span",[e._v("印章管理")])],1)]):e._e(),e._v(" "),e.iswechat?n("section",[n("div",{staticClass:"weui-cells",staticStyle:{"margin-top":"0px"}},[n("div",{staticClass:"weui-cells",staticStyle:{"margin-top":"0px","border-bottom":"0px solid #fefefe"}},[n("van-notice-bar",{directives:[{name:"show",rawName:"v-show",value:""!=e.title&&null!=e.title&&void 0!==e.title,expression:" title!='' && title != null && typeof title != 'undefined' "}],attrs:{"left-icon":"volume-o",color:"#1989fa",background:"#ecf9ff",text:e.title}})],1),e._v(" "),n("div",{staticStyle:{padding:"8px 10px 4px 10px"},attrs:{id:"scanCell"}},[n("van-row",[n("van-col",{attrs:{span:"8"}}),e._v(" "),n("van-col",{staticStyle:{"text-align":"center","font-size":"1.15rem"},attrs:{span:"8"}},[e._v("用印登记确认")]),e._v(" "),n("van-col",{attrs:{span:"8"}})],1)],1)]),e._v(" "),n("van-tag",{staticStyle:{position:"absolute",top:"54px",right:"0px","z-index":"1000","border-radius":"30px 0px 0px 30px"},attrs:{type:e.status_type}},[e._v(" "+e._s(" "+e.status))]),e._v(" "),n("div",{staticClass:"wechat-list",staticStyle:{"background-color":"#fefefe","margin-top":"0px","border-bottom":"0px solid #fefefe"}},[n("div",{staticClass:"weui-cells",staticStyle:{"margin-top":"0px","border-bottom":"0px solid #fefefe"}}),e._v(" "),n("div",{staticClass:"weui-cells",staticStyle:{"margin-top":"0px","margin-left":"0px","padding-top":"5px","padding-bottom":"15px","border-bottom":"0px solid #fefefe"}},[n("van-cell-group",[n("van-cell-group",{staticStyle:{"margin-top":"10px"}},[n("van-cell",{staticStyle:{"margin-left":"-3px","font-size":"0.95rem"},attrs:{value:"基本信息"}}),e._v(" "),n("van-field",{directives:[{name:"show",rawName:"v-show",value:e.item.serialid,expression:"item.serialid"}],attrs:{clearable:"",label:"用印序号",placeholder:"系统自动生成序号！",readonly:""},model:{value:e.item.serialid,callback:function(t){e.$set(e.item,"serialid",t)},expression:"item.serialid"}}),e._v(" "),n("van-field",{attrs:{readonly:"",clearable:"",label:"填报日期",placeholder:"请输入登记日期"},model:{value:e.item.createtime,callback:function(t){e.$set(e.item,"createtime",t)},expression:"item.createtime"}}),e._v(" "),n("van-field",{attrs:{readonly:"",clearable:"",label:"用印类型",placeholder:"选择用印类型"},on:{click:function(t){e.tag.showPickerSealType=!0}},model:{value:e.item.sealtype,callback:function(t){e.$set(e.item,"sealtype",t)},expression:"item.sealtype"}}),e._v(" "),n("van-field",{attrs:{readonly:"",clearable:"",label:"用印顺序",placeholder:"选择用印顺序"},model:{value:e.item.ordertype,callback:function(t){e.$set(e.item,"ordertype",t)},expression:"item.ordertype"}}),e._v(" "),n("van-field",{attrs:{readonly:"",clearable:"",label:"印章类型",placeholder:"选择印章类型"},model:{value:e.item.seal_category,callback:function(t){e.$set(e.item,"seal_category",t)},expression:"item.seal_category"}}),e._v(" "),n("van-field",{attrs:{readonly:e.readonly,clearable:"",label:"名称",placeholder:"请输入文件名称"},model:{value:e.item.filename,callback:function(t){e.$set(e.item,"filename",t)},expression:"item.filename"}}),e._v(" "),n("van-field",{attrs:{readonly:e.readonly,clearable:"",label:"份数",placeholder:"请输入文件份数"},model:{value:e.item.count,callback:function(t){e.$set(e.item,"count",t)},expression:"item.count"}})],1),e._v(" "),n("van-cell-group",{staticStyle:{"margin-top":"10px"}},[n("van-cell",{staticStyle:{"margin-left":"-3px","font-size":"0.95rem"},attrs:{value:"经办信息"}}),e._v(" "),n("van-field",{attrs:{readonly:e.readonly,clearable:"",label:"经办部门",placeholder:"请输入经办部门"},model:{value:e.item.dealDepart,callback:function(t){e.$set(e.item,"dealDepart",t)},expression:"item.dealDepart"}}),e._v(" "),n("van-field",{attrs:{readonly:e.readonly,clearable:"",label:"经办人",placeholder:"请输入经办人"},model:{value:e.item.dealManager,callback:function(t){e.$set(e.item,"dealManager",t)},expression:"item.dealManager"}}),e._v(" "),n("van-field",{attrs:{readonly:e.readonly,clearable:"",label:"经办账户",placeholder:"请输入经办人的OA账号"},model:{value:e.item.username,callback:function(t){e.$set(e.item,"username",t)},expression:"item.username"}}),e._v(" "),n("van-field",{attrs:{readonly:e.readonly,clearable:"",label:"经办电话",placeholder:"请输入经办人联系电话"},model:{value:e.item.mobile,callback:function(t){e.$set(e.item,"mobile",t)},expression:"item.mobile"}}),e._v(" "),n("van-field",{attrs:{readonly:e.readonly,clearable:"",label:"经办邮箱",placeholder:"请输入经办人邮箱"},model:{value:e.item.dealMail,callback:function(t){e.$set(e.item,"dealMail",t)},expression:"item.dealMail"}})],1),e._v(" "),n("van-cell-group",{staticStyle:{"margin-top":"10px"}},[n("van-cell",{staticStyle:{"margin-left":"-3px","font-size":"0.95rem"},attrs:{value:"审批信息"}}),e._v(" "),n("van-field",{attrs:{readonly:"",clearable:"",label:"审批类型",placeholder:"选择审批类型"},on:{click:function(t){e.tag.showPicker=!0}},model:{value:e.item.approveType,callback:function(t){e.$set(e.item,"approveType",t)},expression:"item.approveType"}}),e._v(" "),n("van-field",{directives:[{name:"show",rawName:"v-show",value:"合同类"==e.item.sealtype||"合同类"==e.item.sealtype,expression:"item.sealtype == '合同类' || item.sealtype == '合同类' "}],attrs:{required:"",clearable:"",label:"编号前缀",placeholder:"请输入合同对应前缀，如LD、SD、CD等","error-message":e.message.prefix},on:{blur:function(t){e.validField("prefix"),e.queryHContract()},click:function(t){return e.queryHContract()}},model:{value:e.item.prefix,callback:function(t){e.$set(e.item,"prefix",t)},expression:"item.prefix"}}),e._v(" "),n("van-field",{directives:[{name:"show",rawName:"v-show",value:"合同类"==e.item.sealtype,expression:"item.sealtype == '合同类' "}],attrs:{clearable:"",label:"合同编号",placeholder:"请输入合同编号"},model:{value:e.item.contractId,callback:function(t){e.$set(e.item,"contractId",t)},expression:"item.contractId"}}),e._v(" "),n("van-address-list",{directives:[{name:"show",rawName:"v-show",value:e.hContractList.length>0&&"合同类"==e.item.sealtype&&"待用印"==e.item.status,expression:"hContractList.length > 0 && item.sealtype == '合同类' && item.status =='待用印' "}],attrs:{list:e.hContractList,"default-tag-text":"默认","edit-disabled":""},on:{select:function(t){return e.selectHContract()}},model:{value:e.hContractID,callback:function(t){e.hContractID=t},expression:"hContractID"}}),e._v(" "),n("van-field",{attrs:{readonly:e.readonly,clearable:"",label:"签收人",placeholder:"请输入文件签收人"},model:{value:e.item.signman,callback:function(t){e.$set(e.item,"signman",t)},expression:"item.signman"}}),e._v(" "),n("van-field",{attrs:{required:"",clearable:"",label:"用印公司",placeholder:"请输入用印公司"},model:{value:e.item.company,callback:function(t){e.$set(e.item,"company",t)},expression:"item.company"}}),e._v(" "),n("van-field",{directives:[{name:"show",rawName:"v-show",value:"合同类"==e.item.sealtype,expression:"item.sealtype == '合同类' "}],attrs:{required:"",clearable:"",label:"合作方",placeholder:"请输入合作方名称","error-message":e.message.partner},on:{blur:function(t){return e.validField("partner")}},model:{value:e.item.partner,callback:function(t){e.$set(e.item,"partner",t)},expression:"item.partner"}}),e._v(" "),n("van-field",{attrs:{clearable:"",label:"流程编号",placeholder:"请输入流程编号"},model:{value:e.item.workno,callback:function(t){e.$set(e.item,"workno",t)},expression:"item.workno"}})],1),e._v(" "),n("van-cell-group",{staticStyle:{"margin-top":"10px"}},[n("van-cell",{staticStyle:{"margin-left":"-3px","font-size":"0.95rem"},attrs:{value:"印章管理"}}),e._v(" "),n("van-field",{attrs:{readonly:"",required:"",clearable:"",label:"盖印人",placeholder:"请输入印章管理员(盖印人)"},model:{value:e.item.sealman,callback:function(t){e.$set(e.item,"sealman",t)},expression:"item.sealman"}}),e._v(" "),n("van-field",{directives:[{name:"show",rawName:"v-show",value:"合同类"==e.item.sealtype&&"集团总部"==e.zonename,expression:"item.sealtype == '合同类' && zonename == '集团总部' "}],attrs:{required:"",clearable:"",label:"前台客服",placeholder:"请输入前台客服人员名称"},on:{blur:function(t){return e.queryFrontMan()},click:function(t){return e.queryFrontMan()}},model:{value:e.item.front_name,callback:function(t){e.$set(e.item,"front_name",t)},expression:"item.front_name"}}),e._v(" "),n("van-address-list",{directives:[{name:"show",rawName:"v-show",value:e.fuserList.length>0&&"合同类"==e.item.sealtype&&"集团总部"==e.zonename,expression:"fuserList.length > 0 && item.sealtype == '合同类' && zonename == '集团总部'"}],attrs:{list:e.fuserList,"default-tag-text":"默认","edit-disabled":""},on:{select:function(t){return e.selectFrontUser()}},model:{value:e.fuserid,callback:function(t){e.fuserid=t},expression:"fuserid"}}),e._v(" "),n("van-field",{directives:[{name:"show",rawName:"v-show",value:"合同类"==e.item.sealtype&&!1,expression:"item.sealtype == '合同类' && false "}],attrs:{required:"",clearable:"",label:"归档人员",placeholder:"请输入归档人员名称"},on:{blur:function(t){return e.queryArchiveMan()},click:function(t){return e.queryArchiveMan()}},model:{value:e.item.archive_name,callback:function(t){e.$set(e.item,"archive_name",t)},expression:"item.archive_name"}}),e._v(" "),n("nut-checkboxgroup",{directives:[{name:"show",rawName:"v-show",value:"合同类"==e.item.sealtype&&!1,expression:"item.sealtype == '合同类' && false "}],ref:"checkboxGroup",attrs:{checkBoxData:e.auserList},on:{change:function(t){return e.selectArchiveUser()}},model:{value:e.agroup,callback:function(t){e.agroup=t},expression:"agroup"}}),e._v(" "),n("van-field",{directives:[{name:"show",rawName:"v-show",value:"合同类"==e.item.sealtype&&"集团总部"==e.zonename,expression:"item.sealtype == '合同类' && zonename == '集团总部' "}],attrs:{required:"",clearable:"",label:"财务归档",placeholder:"请输入财务归档人员名称"},on:{blur:function(t){return e.queryFinanceArchiveMan()},click:function(t){return e.queryFinanceArchiveMan()}},model:{value:e.item.finance_name,callback:function(t){e.$set(e.item,"finance_name",t)},expression:"item.finance_name"}}),e._v(" "),n("van-address-list",{directives:[{name:"show",rawName:"v-show",value:e.financeuserList.length>0&&"合同类"==e.item.sealtype&&"集团总部"==e.zonename,expression:"financeuserList.length > 0 && item.sealtype == '合同类' && zonename == '集团总部' "}],attrs:{list:e.financeuserList,"default-tag-text":"默认","edit-disabled":""},on:{select:function(t){return e.selectFinanceUser()}},model:{value:e.financeUserid,callback:function(t){e.financeUserid=t},expression:"financeUserid"}}),e._v(" "),n("van-field",{directives:[{name:"show",rawName:"v-show",value:"合同类"==e.item.sealtype&&"集团总部"==e.zonename,expression:"item.sealtype == '合同类' && zonename == '集团总部' "}],attrs:{required:"",clearable:"",label:"档案归档",placeholder:"请输入档案归档人员名称"},on:{blur:function(t){return e.queryRecordArchiveMan()},click:function(t){return e.queryRecordArchiveMan()}},model:{value:e.item.record_name,callback:function(t){e.$set(e.item,"record_name",t)},expression:"item.record_name"}}),e._v(" "),n("van-address-list",{directives:[{name:"show",rawName:"v-show",value:e.recorduserList.length>0&&"合同类"==e.item.sealtype&&"集团总部"==e.zonename,expression:"recorduserList.length > 0 && item.sealtype == '合同类' && zonename == '集团总部' "}],attrs:{list:e.recorduserList,"default-tag-text":"默认","edit-disabled":""},on:{select:function(t){return e.selectRecordUser()}},model:{value:e.recordUserid,callback:function(t){e.recordUserid=t},expression:"recordUserid"}})],1),e._v(" "),n("van-cell-group",{staticStyle:{"margin-top":"10px"}},[n("van-cell",{staticStyle:{"margin-left":"-3px","font-size":"0.95rem"},attrs:{value:"处理信息"}}),e._v(" "),n("van-field",{directives:[{name:"show",rawName:"v-show",value:!!e.item.sealtime&&!1,expression:"!!item.sealtime && false"}],attrs:{clearable:"",label:"资料盖印时间",placeholder:"--",readonly:""},model:{value:e.item.sealtime,callback:function(t){e.$set(e.item,"sealtime",t)},expression:"item.sealtime"}}),e._v(" "),n("van-field",{directives:[{name:"show",rawName:"v-show",value:!!e.item.receive_time&&!1,expression:"!!item.receive_time && false"}],attrs:{clearable:"",label:"资料领取时间",placeholder:"--",readonly:""},model:{value:e.item.receive_time,callback:function(t){e.$set(e.item,"receive_time",t)},expression:"item.receive_time"}}),e._v(" "),n("van-field",{directives:[{name:"show",rawName:"v-show",value:!!e.item.send_time&&!1,expression:"!!item.send_time && false"}],attrs:{clearable:"",label:"资料寄送时间",placeholder:"--",readonly:""},model:{value:e.item.send_time,callback:function(t){e.$set(e.item,"send_time",t)},expression:"item.send_time"}}),e._v(" "),n("van-field",{directives:[{name:"show",rawName:"v-show",value:!!e.item.front_time&&!1,expression:"!!item.front_time && false"}],attrs:{clearable:"",label:"移交前台时间",placeholder:"--",readonly:""},model:{value:e.item.front_time,callback:function(t){e.$set(e.item,"front_time",t)},expression:"item.front_time"}}),e._v(" "),n("van-field",{directives:[{name:"show",rawName:"v-show",value:!!e.item.finance_time&&!1,expression:"!!item.finance_time && false"}],attrs:{clearable:"",label:"财务归档时间",placeholder:"--",readonly:""},model:{value:e.item.finance_time,callback:function(t){e.$set(e.item,"finance_time",t)},expression:"item.finance_time"}}),e._v(" "),n("van-field",{directives:[{name:"show",rawName:"v-show",value:!!e.item.doc_time&&!1,expression:"!!item.doc_time && false"}],attrs:{clearable:"",label:"档案归档时间",placeholder:"--",readonly:""},model:{value:e.item.doc_time,callback:function(t){e.$set(e.item,"doc_time",t)},expression:"item.doc_time"}}),e._v(" "),n("van-field",{directives:[{name:"show",rawName:"v-show",value:!!e.item.done_time&&!1,expression:"!!item.done_time && false"}],attrs:{clearable:"",label:"台账生成时间",placeholder:"--",readonly:""},model:{value:e.item.done_time,callback:function(t){e.$set(e.item,"done_time",t)},expression:"item.done_time"}}),e._v(" "),n("van-field",{attrs:{clearable:"",label:"流程状态",placeholder:"",readonly:""},model:{value:e.item.status,callback:function(t){e.$set(e.item,"status",t)},expression:"item.status"}}),e._v(" "),"done"!=e.item.type||e.item.finance_time&&e.item.doc_time?e._e():n("van-field",{attrs:{clickable:"",clearable:"",label:"归档类型",placeholder:"选择归档类型"},on:{click:function(t){e.tag.showPicker=!0}},model:{value:e.item.archiveType,callback:function(t){e.$set(e.item,"archiveType",t)},expression:"item.archiveType"}})],1),e._v(" "),n("van-popup",{attrs:{round:"",position:"bottom"},model:{value:e.tag.showPicker,callback:function(t){e.$set(e.tag,"showPicker",t)},expression:"tag.showPicker"}},[n("van-picker",{attrs:{"show-toolbar":"",columns:e.archiveTypeColumns},on:{cancel:function(t){e.tag.showPicker=!1},confirm:e.archiveTypeConfirm}})],1)],1),e._v(" "),n("van-cell-group",{directives:[{name:"show",rawName:"v-show",value:"我方先印"==e.item.ordertype,expression:"item.ordertype == '我方先印' "}],staticStyle:{"margin-top":"10px"}},[n("van-cell",{staticStyle:{"margin-left":"-3px","font-size":"0.95rem"},attrs:{value:"寄件信息"}}),e._v(" "),n("van-field",{attrs:{readonly:e.readonly,clearable:"",label:"寄送地址",placeholder:"请输入对方公司/单位/组织的寄送地址"},model:{value:e.item.send_location,callback:function(t){e.$set(e.item,"send_location",t)},expression:"item.send_location"}}),e._v(" "),n("van-field",{attrs:{readonly:e.readonly,clearable:"",label:"寄送电话",placeholder:"请输入对方公司/单位/组织相关负责人联系电话"},model:{value:e.item.send_mobile,callback:function(t){e.$set(e.item,"send_mobile",t)},expression:"item.send_mobile"}})],1),e._v(" "),n("van-cell-group",{staticStyle:{"margin-top":"10px"}},[n("van-cell",{staticStyle:{"margin-left":"-3px","font-size":"0.95rem"},attrs:{value:"用印说明"}}),e._v(" "),n("van-field",{attrs:{required:"",rows:"2",autosize:"",clickable:"",clearable:"",label:"备注说明",type:"textarea",maxlength:"500",placeholder:"请印章管理员输入用印意见或备注说明！","error-message":e.message.message,"show-word-limit":""},on:{blur:function(t){return e.validField("message")}},model:{value:e.item.message,callback:function(t){e.$set(e.item,"message",t)},expression:"item.message"}})],1),e._v(" "),n("van-cell-group",{directives:[{name:"show",rawName:"v-show",value:e.processLogList.length>0,expression:"processLogList.length > 0"}],staticStyle:{"margin-top":"10px"}},[n("van-cell",{staticStyle:{"margin-left":"-3px","font-size":"0.95rem"},attrs:{value:"处理记录"}}),e._v(" "),n("div",[n("van-steps",{attrs:{direction:"vertical",active:e.processLogList.length-1}},[e._l(e.processLogList,function(t){return[n("van-step",{key:t.id},[n("h3",[e._v(e._s(t.action+" "+t.employee+" "+t.action_opinion))]),e._v(" "),n("p",[e._v(e._s(t.create_time))])])]})],2)],1)],1),e._v(" "),n("div",{staticStyle:{"margin-top":"30px","margin-bottom":"10px","border-top":"0px solid #fcfcfc"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.fileList.length>0,expression:" fileList.length > 0 "}],staticStyle:{"margin-top":"15px","margin-left":"7px"}},[e._v("\n            图片附件\n          ")]),e._v(" "),n("div",{staticStyle:{"margin-left":"10px","margin-top":"10px"}},[n("van-uploader",{attrs:{multiple:"","preview-size":"100","lazy-load":!0,"show-upload":!1,deletable:!1,"preview-options":{closeable:!0,loop:!0,showIndicators:!0,swipeDuration:500}},model:{value:e.fileList,callback:function(t){e.fileList=t},expression:"fileList"}})],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.officeList.length>0,expression:" officeList.length > 0 "}],staticStyle:{"margin-top":"15px","margin-left":"7px"}},[e._v("\n            其他附件\n          ")]),e._v(" "),n("div",{staticStyle:{"margin-left":"10px","margin-top":"10px"}},[n("van-cell-group",[e._l(e.officeList,function(t,a){return[n("van-cell",{key:a,staticClass:"van-ellipsis",staticStyle:{padding:"10px 2px 10px 2px"},attrs:{value:t.name,"is-link":"",clickable:!0},on:{click:function(n){return e.saveAsFile(t.url,t.name)}}})]})],2)],1),e._v(" "),"待用印"==e.item.status&&"finish"!==e.item.type?n("van-goods-action",[n("van-goods-action-button",{attrs:{type:"warning",text:"退回"},on:{click:function(t){return e.handleDisagree()}}}),e._v(" "),n("van-goods-action-button",{attrs:{type:"danger",text:"确认"},on:{click:function(t){return e.handleAgree()}}})],1):e._e(),e._v(" "),"已用印"!=e.item.status&&"已领取"!=e.item.status&&"已寄送"!=e.item.status||"front"!=e.item.type||"集团总部"!=e.zonename?e._e():n("van-goods-action",[n("van-goods-action-button",{directives:[{name:"show",rawName:"v-show",value:"我方先印"==e.item.ordertype&&("已用印"==e.item.status||"已领取"==e.item.status),expression:" (item.ordertype == '我方先印' && (item.status == '已用印' || item.status == '已领取')) "}],staticStyle:{"border-radius":"10px 10px 10px 10px"},attrs:{id:"informed_confirm",type:"danger","native-type":"submit",text:"确认寄送"},on:{click:function(t){return e.handleSending()}}}),e._v(" "),n("van-goods-action-button",{directives:[{name:"show",rawName:"v-show",value:"我方先印"!=e.item.ordertype&&("已用印"==e.item.status||"已领取"==e.item.status)||"我方先印"==e.item.ordertype&&"已寄送"==e.item.status,expression:" (item.ordertype != '我方先印' && (item.status == '已用印' || item.status == '已领取')) || (item.ordertype == '我方先印' && item.status == '已寄送')"}],staticStyle:{"border-radius":"10px 10px 10px 10px"},attrs:{id:"informed_confirm",type:"danger","native-type":"submit",text:"确认移交"},on:{click:function(t){return e.handleConfirm()}}})],1),e._v(" "),"done"!=e.item.type||e.item.finance_time&&e.item.doc_time||e.tag.showPicker||"集团总部"!=e.zonename?e._e():n("van-goods-action",[n("van-goods-action-button",{staticStyle:{"border-radius":"10px 10px 10px 10px"},attrs:{id:"informed_confirm",type:"danger","native-type":"submit",text:"确认归档"},on:{click:function(t){return e.handleArchive()}}})],1),e._v(" "),"已归档"!=e.item.status||"archive"!=e.item.type||e.item.done_time||"集团总部"!=e.zonename?e._e():n("van-goods-action",[n("van-goods-action-button",{staticStyle:{"border-radius":"10px 10px 10px 10px"},attrs:{id:"informed_confirm",type:"danger","native-type":"submit",text:"完成归档"},on:{click:function(t){return e.handleFinaly()}}})],1)],1),e._v(" "),n("van-loading",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticStyle:{position:"absolute",margin:"0px 40%",width:"20%",top:"42%"},attrs:{size:"24px",vertical:""}},[e._v("加载中...")]),e._v(" "),n("div",{staticStyle:{height:"100px"}})],1)])],1):e._e(),e._v(" "),e.iswechat?e._e():n("setion",[n("div",{staticClass:"section-nowechat"},[e._v("\n      请使用微信客户端打开\n    ")])])],1)])},i=[],o={render:a,staticRenderFns:i};t.a=o},YntP:function(e,t,n){t=e.exports=n("FZ+f")(!0),t.push([e.i,'#news{margin-top:28px}#search{display:none}.app-header{position:relative;transition:.3s;width:100%;z-index:10000;height:45px;line-height:45px;font-size:18px;background:linear-gradient(180deg,#303036,#3c3b40);color:#fff;text-align:center}.weui-cell_tab{height:30px;text-align:center;float:left;width:24.5%;margin:0}.wechat-list .list-info{position:relative;z-index:2;left:0;width:100%;height:64px;padding:8px;background-color:#fff}.wechat-list .list-info .header-box{position:relative;float:left;width:48px;height:48px;margin-right:10px;margin-left:0}.wechat-list .new-msg-count{font-style:normal;font-family:PingFang SC,Hiragino Sans GB,Arial,Microsoft YaHei,Helvetica;right:-9px;top:-5px;padding:0 4px;width:auto;min-width:18px;height:18px;line-height:18px;border-radius:9px;font-size:14px;background-color:#f43531}.wechat-list .new-msg-count,.wechat-list .new-msg-dot{position:absolute;z-index:2;color:#fff;text-align:center}.wechat-list .new-msg-dot{right:-4px;top:-3px;width:10px;height:10px;border-radius:50%;background-color:red;background-color:#f43531;font-size:0}.wechat-list .list-info .header-box .header{height:100%;border-radius:5px;display:-webkit-box;display:-ms-flexbox;display:flex;display:-webkit-flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-align:start;-webkit-align-items:flex-start;-ms-flex-align:start;align-items:flex-start;overflow:hidden;background:#dddbdb}.wechat-list .list-info .header-box .header img{width:10%;height:auto;-webkit-box-flex:2;-webkit-flex-grow:2;-ms-flex-positive:2;flex-grow:2;border:0}.wechat-list .list-info .desc-box{overflow:hidden}.wechat-list .list-info .desc-box .desc-time{float:right;color:#b8b8b8}.wechat-list .list-info .desc-box .desc-author{height:25px;line-height:25px;font-size:16px;color:#000}.wechat-list .list-info .desc-box .desc-msg{height:23px;line-height:23px;font-size:14px;color:#888}.wechat-list .list-info .desc-box .desc-msg .desc-mute{float:right;color:#b8b8b8}.van-cell--large .van-cell__label{font-size:14px;width:205%;display:block}.van-cell--large .van-cell__title{font-size:15.5px}.wechat-list .weui-cells .van-cell:after{position:absolute;box-sizing:border-box;content:" ";pointer-events:none;right:16px;bottom:0;left:16px;border-bottom:0 solid #ebedf0;-webkit-transform:scaleY(.5);transform:scaleY(.5)}.van-uploader__preview .van-uploader__preview-image{display:block;width:100px;height:100px;overflow:hidden}.van-uploader__upload{position:relative;display:-webkit-box;display:-webkit-flex;display:none;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;box-sizing:border-box;width:80px;height:80px;margin:0 8px 8px 0;background-color:#f7f8fa}.van-uploader__wrapper .van-uploader__upload{display:none}.van-goods-action{position:relative;right:0;bottom:0;left:0;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;box-sizing:content-box;height:50px;padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom);background-color:#fff;z-index:10}.van-goods-action-button--danger{background:-webkit-linear-gradient(left,#ff6034,#ee0a24);background:linear-gradient(90deg,#ff6034,#ee0a24);border-radius:0 10px 10px 0}.van-goods-action-button--warning{border-radius:10px 0 0 10px}#informed_confirm .van-goods-action-button--danger{border-radius:10px 10px 10px 10px}.main-loading{text-align:center;width:100%;height:60px;margin-top:0;background:#fefefe;position:absolute;top:300px;opacity:.4;filter:alpha(opacity=40)}#van-finance-apply .van-goods-action-button--danger{background:-webkit-linear-gradient(left,#ff6034,#ee0a24);background:linear-gradient(90deg,#ff6034,#ee0a24);border-radius:10px 10px 10px 10px;margin:0 10px;width:95%;text-align:center}',"",{version:3,sources:["/Users/yunwisdom/Workspace/xdata-vuechat-service/src/assets/css/sealview.css"],names:[],mappings:"AAAA,MACI,eAAiB,CACpB,AAED,QACI,YAAc,CACjB,AAED,YAEI,kBAAmB,AACnB,eAAiB,AACjB,WAAY,AACZ,cAAe,AACf,YAAa,AACb,iBAAkB,AAClB,eAAgB,AAChB,mDAAsD,AACtD,WAAY,AACZ,iBAAmB,CACtB,AAED,eACI,YAAa,AACb,kBAAmB,AACnB,WAAY,AACZ,YAAa,AACb,QAAgB,CACnB,AAED,wBACI,kBAAmB,AACnB,UAAW,AACX,OAAQ,AACR,WAAY,AACZ,YAAa,AACb,YAAa,AACb,qBAAuB,CAC1B,AAED,oCACI,kBAAmB,AACnB,WAAY,AACZ,WAAY,AACZ,YAAa,AACb,kBAAmB,AACnB,aAAiB,CACpB,AAED,4BAEI,kBAAmB,AACnB,yEAA8E,AAC9E,WAAY,AACZ,SAAU,AAEV,cAAe,AACf,WAAY,AACZ,eAAgB,AAChB,YAAa,AACb,iBAAkB,AAClB,kBAAmB,AAGnB,eAAgB,AAChB,wBAA0B,CAC7B,AAED,sDAlBI,kBAAmB,AAKnB,UAAW,AAOX,WAAY,AACZ,iBAAmB,CAkBtB,AAbD,0BAEI,WAAY,AACZ,SAAU,AACV,WAAY,AACZ,YAAa,AAEb,kBAAmB,AAGnB,qBAAsB,AACtB,yBAA0B,AAC1B,WAAa,CAChB,AAED,4CACI,YAAa,AACb,kBAAmB,AACnB,oBAAqB,AACrB,oBAAqB,AACrB,aAAc,AACd,qBAAsB,AACtB,8BAA+B,AAC/B,6BAA8B,AAC9B,2BAA4B,AAC5B,uBAAwB,AACxB,mBAAoB,AACpB,uBAAwB,AACxB,mBAAoB,AACpB,eAAgB,AAChB,wBAAyB,AACzB,+BAAgC,AAChC,qBAAsB,AACtB,uBAAwB,AACxB,gBAAiB,AACjB,kBAAoB,CACvB,AAED,gDACI,UAAW,AACX,YAAa,AACb,mBAAoB,AACpB,oBAAqB,AACrB,oBAAqB,AACrB,YAAa,AACb,QAAU,CACb,AAED,kCACI,eAAiB,CACpB,AAED,6CACI,YAAa,AACb,aAAe,CAClB,AAED,+CACI,YAAa,AACb,iBAAkB,AAClB,eAAgB,AAChB,UAAY,CACf,AAED,4CACI,YAAa,AACb,iBAAkB,AAClB,eAAgB,AAChB,UAAY,CACf,AAED,uDACI,YAAa,AACb,aAAe,CAClB,AAED,kCACI,eAAgB,AAChB,WAAY,AACZ,aAAe,CAClB,AAED,kCACI,gBAAkB,CACrB,AAED,yCACI,kBAAmB,AACnB,sBAAuB,AACvB,YAAa,AACb,oBAAqB,AACrB,WAAY,AACZ,SAAU,AACV,UAAW,AACX,8BAAiC,AACjC,6BAA8B,AAC9B,oBAAsB,CACzB,AAED,oDACI,cAAe,AACf,YAAa,AACb,aAAc,AACd,eAAiB,CACpB,AAED,sBACI,kBAAmB,AACnB,oBAAqB,AACrB,qBAAsB,AACtB,aAAc,AACd,4BAA6B,AAC7B,6BAA8B,AAC9B,8BAA+B,AAC/B,sBAAuB,AACvB,yBAA0B,AAC1B,2BAA4B,AAC5B,mBAAoB,AACpB,wBAAyB,AACzB,+BAAgC,AAChC,uBAAwB,AACxB,sBAAuB,AACvB,WAAY,AACZ,YAAa,AACb,mBAAoB,AACpB,wBAA0B,CAC7B,AAED,6CACI,YAAc,CACjB,AAED,kBACI,kBAAmB,AACnB,QAAS,AACT,SAAU,AACV,OAAQ,AACR,oBAAqB,AACrB,qBAAsB,AACtB,aAAc,AACd,yBAA0B,AAC1B,2BAA4B,AAC5B,mBAAoB,AACpB,uBAAwB,AACxB,YAAa,AACb,gDAAiD,AACjD,2CAA4C,AAC5C,sBAAuB,AACvB,UAAY,CACf,AAED,iCACI,yDAA4D,AAC5D,kDAAwD,AACxD,2BAAiC,CACpC,AAED,kCACI,2BAAiC,CACpC,AAED,mDACI,iCAAmC,CACtC,AAED,cACI,kBAAmB,AACnB,WAAY,AACZ,YAAa,AACb,aAAgB,AAChB,mBAAoB,AACpB,kBAAmB,AACnB,UAAW,AACX,WAAa,AACb,wBAA0B,CAC7B,AAED,oDACI,yDAA4D,AAC5D,kDAAwD,AACxD,kCAAmC,AACnC,cAAiB,AACjB,UAAW,AACX,iBAAmB,CACtB",file:"sealview.css",sourcesContent:["#news {\n    margin-top: 28px;\n}\n\n#search {\n    display: none;\n}\n\n.app-header {\n    /* position: absolute; */\n    position: relative;\n    transition: 0.3s;\n    width: 100%;\n    z-index: 10000;\n    height: 45px;\n    line-height: 45px;\n    font-size: 18px;\n    background: linear-gradient(180deg, #303036, #3c3b40);\n    color: #fff;\n    text-align: center;\n}\n\n.weui-cell_tab {\n    height: 30px;\n    text-align: center;\n    float: left;\n    width: 24.5%;\n    margin: 0px 0px;\n}\n\n.wechat-list .list-info {\n    position: relative;\n    z-index: 2;\n    left: 0;\n    width: 100%;\n    height: 64px;\n    padding: 8px;\n    background-color: #fff;\n}\n\n.wechat-list .list-info .header-box {\n    position: relative;\n    float: left;\n    width: 48px;\n    height: 48px;\n    margin-right: 10px;\n    margin-left: 0px;\n}\n\n.wechat-list .new-msg-count {\n    position: absolute;\n    font-style: normal;\n    font-family: PingFang SC, Hiragino Sans GB, Arial, Microsoft YaHei, Helvetica;\n    right: -9px;\n    top: -5px;\n    z-index: 2;\n    padding: 0 4px;\n    width: auto;\n    min-width: 18px;\n    height: 18px;\n    line-height: 18px;\n    border-radius: 9px;\n    color: #fff;\n    text-align: center;\n    font-size: 14px;\n    background-color: #f43531;\n}\n\n.wechat-list .new-msg-dot {\n    position: absolute;\n    right: -4px;\n    top: -3px;\n    width: 10px;\n    height: 10px;\n    z-index: 2;\n    border-radius: 50%;\n    color: #ffffff;\n    text-align: center;\n    background-color: red;\n    background-color: #f43531;\n    font-size: 0;\n}\n\n.wechat-list .list-info .header-box .header {\n    height: 100%;\n    border-radius: 5px;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    display: -webkit-flex;\n    -webkit-box-orient: horizontal;\n    -webkit-box-direction: normal;\n    -webkit-flex-direction: row;\n    -ms-flex-direction: row;\n    flex-direction: row;\n    -webkit-flex-wrap: wrap;\n    -ms-flex-wrap: wrap;\n    flex-wrap: wrap;\n    -webkit-box-align: start;\n    -webkit-align-items: flex-start;\n    -ms-flex-align: start;\n    align-items: flex-start;\n    overflow: hidden;\n    background: #dddbdb;\n}\n\n.wechat-list .list-info .header-box .header img {\n    width: 10%;\n    height: auto;\n    -webkit-box-flex: 2;\n    -webkit-flex-grow: 2;\n    -ms-flex-positive: 2;\n    flex-grow: 2;\n    border: 0;\n}\n\n.wechat-list .list-info .desc-box {\n    overflow: hidden;\n}\n\n.wechat-list .list-info .desc-box .desc-time {\n    float: right;\n    color: #b8b8b8;\n}\n\n.wechat-list .list-info .desc-box .desc-author {\n    height: 25px;\n    line-height: 25px;\n    font-size: 16px;\n    color: #000;\n}\n\n.wechat-list .list-info .desc-box .desc-msg {\n    height: 23px;\n    line-height: 23px;\n    font-size: 14px;\n    color: #888;\n}\n\n.wechat-list .list-info .desc-box .desc-msg .desc-mute {\n    float: right;\n    color: #b8b8b8;\n}\n\n.van-cell--large .van-cell__label {\n    font-size: 14px;\n    width: 205%;\n    display: block;\n}\n\n.van-cell--large .van-cell__title {\n    font-size: 15.5px;\n}\n\n.wechat-list .weui-cells .van-cell::after {\n    position: absolute;\n    box-sizing: border-box;\n    content: ' ';\n    pointer-events: none;\n    right: 16px;\n    bottom: 0;\n    left: 16px;\n    border-bottom: 0px solid #ebedf0;\n    -webkit-transform: scaleY(.5);\n    transform: scaleY(.5);\n}\n\n.van-uploader__preview .van-uploader__preview-image {\n    display: block;\n    width: 100px;\n    height: 100px;\n    overflow: hidden;\n}\n\n.van-uploader__upload {\n    position: relative;\n    display: -webkit-box;\n    display: -webkit-flex;\n    display: none;\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: normal;\n    -webkit-flex-direction: column;\n    flex-direction: column;\n    -webkit-box-align: center;\n    -webkit-align-items: center;\n    align-items: center;\n    -webkit-box-pack: center;\n    -webkit-justify-content: center;\n    justify-content: center;\n    box-sizing: border-box;\n    width: 80px;\n    height: 80px;\n    margin: 0 8px 8px 0;\n    background-color: #f7f8fa;\n}\n\n.van-uploader__wrapper .van-uploader__upload {\n    display: none;\n}\n\n.van-goods-action {\n    position: relative;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    display: -webkit-box;\n    display: -webkit-flex;\n    display: flex;\n    -webkit-box-align: center;\n    -webkit-align-items: center;\n    align-items: center;\n    box-sizing: content-box;\n    height: 50px;\n    padding-bottom: constant(safe-area-inset-bottom);\n    padding-bottom: env(safe-area-inset-bottom);\n    background-color: #fff;\n    z-index: 10;\n}\n\n.van-goods-action-button--danger {\n    background: -webkit-linear-gradient(left, #ff6034, #ee0a24);\n    background: linear-gradient(to right, #ff6034, #ee0a24);\n    border-radius: 0px 10px 10px 0px;\n}\n\n.van-goods-action-button--warning {\n    border-radius: 10px 0px 0px 10px;\n}\n\n#informed_confirm .van-goods-action-button--danger {\n    border-radius: 10px 10px 10px 10px;\n}\n\n.main-loading {\n    text-align: center;\n    width: 100%;\n    height: 60px;\n    margin-top: 0px;\n    background: #fefefe;\n    position: absolute;\n    top: 300px;\n    opacity: 0.4;\n    filter: alpha(opacity=40);\n}\n\n#van-finance-apply .van-goods-action-button--danger {\n    background: -webkit-linear-gradient(left, #ff6034, #ee0a24);\n    background: linear-gradient(to right, #ff6034, #ee0a24);\n    border-radius: 10px 10px 10px 10px;\n    margin: 0px 10px;\n    width: 95%;\n    text-align: center;\n}"],sourceRoot:""}])},Z7xc:function(e,t,n){"use strict";var a=n("fZjL"),i=n.n(a),o=n("Gu7T"),r=n.n(o),s=n("mvHQ"),l=n.n(s),c=n("Xxa5"),m=n.n(c),d=n("exGp"),A=n.n(d);t.a={mixins:[window.mixin],data:function(){return{pageName:"详情",momentNewMsg:!0,tabname:"1",active:1,id:"",type:"",title:"用印登记确认表",content:"",files:"",from:"",tname:"",bname:"",tasktype:"done",previewurl:"",purl:"",tableInfo:"",orderInfo:"",status:"",status_type:"",fields:[],sealuserid:"",iswechat:!1,message:Betools.workconfig.compValidation.seal.message,valid:Betools.workconfig.compValidation.seal.valid,cuserid:"",cuserList:[],suserid:"",suserList:[],fuserid:"",fuserList:[],auserid:"",auserList:[],financeUserid:"",financeuserList:[],recordUserid:"",recorduserList:[],agroup:[],back:"/app",hContractID:"",item:{createtime:dayjs().format("YYYY-MM-DD"),serialid:"",filename:"",count:"",dealDepart:"",dealManager:"",username:"",approveType:"",contractId:"",signman:"",workno:"",sealtime:"",sealman:"",sealtype:"",ordertype:"",finance_time:"",doc_time:"",receive_time:"",done_time:"",front_time:"",send_time:"",mobile:"",send_location:"",send_mobile:"",seal:"",front:"",front_name:"",archive:"",archive_name:[],finance:"",finance_name:"",record:"",record_name:"",confirmStatus:"",prefix:"",status:"",company:"",partner:"",message:"同意"},statusType:Betools.workconfig.statusType,mailconfig:Betools.workconfig.mailconfig,config:Betools.workconfig.config,group:Betools.workconfig.group,backPath:"/app",workflowlist:[],announces:[],informList:[],fileList:[],loading:!1,officeList:[],hContractList:[],processLogList:[],tag:{showPicker:!1,showPickerSealType:!1},view:"",readonly:!0,archiveTypeColumns:Betools.workconfig.compcolumns.archiveTypeColumns,orderTypeColumns:Betools.workconfig.compcolumns.orderTypeColumns,sealTypeColumns:Betools.workconfig.compcolumns.sealTypeColumns,approveColumns:Betools.workconfig.compcolumns.approveColumns,zonename:""}},activated:function(){this.queryInfo()},mounted:function(){this.queryInfo()},methods:{weworkLogin:function(){var e=this;return A()(m.a.mark(function t(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Betools.query.queryWeworkUser();case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}},t,e,[[0,6]])}))()},validField:function(e){Betools.workconfig.system.config.regexp.mail;return this.message[e]=Betools.tools.isNull(this.item[e])?this.valid[e]:"",Betools.storage.setStore("system_seal_item",l()(this.item),7200),Betools.tools.isNull(this.message[e])},validFieldConfirm:function(e){return this.message[e]=Betools.tools.isNull(this.item[e])?this.valid[e]:"","dealMail"==e&&(this.message[e]=Betools.workconfig.system.config.regexp.mail.test(this.item[e])?"":"请输入正确的邮箱地址！"),Betools.tools.isNull(this.message[e])},selectHContract:function(e){var t=this;return A()(m.a.mark(function e(){var n,a,i,o;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Betools.tools.sleep(0);case 2:if(n=t.hContractID,a=t.hContractList.find(function(e,t){return n==e.id}),!t.item.filename.includes("商品房买卖合同")&&!t.item.filename.includes("商品房购房合同")){e.next=8;break}return e.abrupt("return");case 8:n.includes("[")&&n.includes("]")?(i=parseInt(n.split("["+dayjs().format("YYYY")+"]")[1])+1,i=("00000"+i).slice(Betools.workconfig.CON_SEAL_CODE_LENGTH),t.item.contractId=t.item.prefix+"["+dayjs().format("YYYY")+"]"+i):n.includes("-")&&n.includes("-"+dayjs().format("YYYY")+"-")&&(o=parseInt(n.split("-"+dayjs().format("YYYY")+"-")[1])+1,o=("00000"+o).slice(Betools.workconfig.CON_SEAL_CODE_LENGTH),t.item.contractId=n.split("-"+dayjs().format("YYYY")+"-")[0]+"-"+dayjs().format("YYYY")+"-"+o);case 9:case"end":return e.stop()}},e,t)}))()},queryHContract:function(){var e=this;return A()(m.a.mark(function t(){var n,a,i,o,r,s,l,c,d;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=e.item.prefix=e.item.prefix.toUpperCase();try{n=e.item.contractId&&e.item.contractId.includes("-"+dayjs().format("YYYY")+"-")?e.item.contractId.split("-"+dayjs().format("YYYY")+"-")[0].toUpperCase():n,n=e.item.contractId&&e.item.contractId.includes("["+dayjs().format("YYYY")+"]")?e.item.contractId.split("["+dayjs().format("YYYY")+"]")[0].toUpperCase():n}catch(e){console.log(e)}if(t.prev=2,!n){t.next=11;break}return t.next=6,Betools.manage.queryContractInfoByPrefix(n.trim());case 6:if(a=t.sent,e.hContractList=[],(a=a.filter(function(e,t){return e.contract_id.includes(""+dayjs().format("YYYY"))}))&&Array.isArray(a)&&a.length>0){try{a.map(function(t,n){e.hContractList.push({id:t.contract_id,value:t.filename+"["+t.seal_type+"] "+t.contract_id+",",label:t.filename+"["+t.seal_type+"] "+t.contract_id+",",address:t.deal_manager+" "+t.deal_depart+" 合同编号: "+t.contract_id,name:t.filename,tel:"",mail:t.mail,isDefault:!n})})}catch(e){console.log(e)}try{e.hContractList=e.hContractList.sort(function(e,t){var n="["+dayjs().format("YYYY")+"]",a=e.id.split(n)[1];return t.id.split(n)[1]-a})}catch(e){console.log(e)}try{e.hContractList=e.hContractList.filter(function(t,n){return t.isDefault=0==n,n==e.hContractList.findIndex(function(e,n){return e.id==t.id})&&t.id.includes(""+dayjs().format("YYYY"))}),i=e.hContractList[0].id,e.item.filename.includes("商品房买卖合同")||e.item.filename.includes("商品房购房合同")?console.log("买卖合同等"):i.includes("[")&&i.includes("]")?(o=parseInt(i.split("["+dayjs().format("YYYY")+"]")[1])+1,o=("00000"+o).slice(Betools.workconfig.CON_SEAL_CODE_LENGTH),e.item.contractId=e.item.prefix+"["+dayjs().format("YYYY")+"]"+o):i.includes("-")&&i.includes("-"+dayjs().format("YYYY")+"-")&&(r=parseInt(i.split("-"+dayjs().format("YYYY")+"-")[1])+1,r=("00000"+r).slice(Betools.workconfig.CON_SEAL_CODE_LENGTH),e.item.contractId=i.split("-"+dayjs().format("YYYY")+"-")[0]+"-"+dayjs().format("YYYY")+"-"+r)}catch(e){console.log(e)}}else a&&Array.isArray(a)&&0==a.length&&(s=n+"["+dayjs().format("YYYY")+"]0000",e.hContractList.push({id:s,value:n+"["+dayjs().format("YYYY")+"]0000",label:"自动合同编号 ",address:"编号 "+s+" (系统中无此编号前缀，自动生成)",name:"合同编号："+s,tel:""}),l=e.hContractList[0].id,e.item.filename.includes("商品房买卖合同")||e.item.filename.includes("商品房购房合同")?console.log("买卖合同等"):l.includes("[")&&l.includes("]")?(c=parseInt(l.split("["+dayjs().format("YYYY")+"]")[1])+1,c=("00000"+c).slice(Betools.workconfig.CON_SEAL_CODE_LENGTH),e.item.contractId=e.item.prefix+"["+dayjs().format("YYYY")+"]"+c):l.includes("-")&&l.includes("-"+dayjs().format("YYYY")+"-")&&(d=parseInt(l.split("-"+dayjs().format("YYYY")+"-")[1])+1,d=("00000"+d).slice(Betools.workconfig.CON_SEAL_CODE_LENGTH),e.item.contractId=l.split("-"+dayjs().format("YYYY")+"-")[0]+"-"+dayjs().format("YYYY")+"-"+d));e.item.contractId=e.item.contractId.includes("NaN")?e.item.contractId.replace("NaN","0000"):e.item.contractId;case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(2),console.log(t.t0);case 16:case"end":return t.stop()}},t,e,[[2,13]])}))()},queryArchiveMan:function(){var e=this;return A()(m.a.mark(function t(){var n,a,i,o,s,l;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.item.archive_name||e.item.archive,t.prev=1,!n){t.next=10;break}return t.next=5,Betools.manage.queryUserByNameHRM(n.trim());case 5:return a=t.sent,t.next=8,Betools.manage.queryUserByNameHRM(e.item.archive.trim());case 8:if(i=t.sent,a){if(Array.isArray(a)){i&&(a=[].concat(r()(a),r()(i)));try{a.map(function(t,n){var i=t.textfield1.split("||")[0];i=i.slice(i.lastIndexOf(">")+1);var o=t.textfield1.split("||")[1];o=o.slice(o.lastIndexOf(">")+1),e.auserList.push({id:t.loginid,value:a.lastname+",",label:t.lastname+" "+t.mobile+" "+t.textfield1.split("||")[1].replace("中心",""),name:t.lastname,tel:"",address:i+"||"+t.textfield1.split("||")[1],company:i,department:o,mail:t.email,isDefault:!n})})}catch(e){console.log(e)}}else try{o=a.textfield1.split("||")[0],o=o.slice(o.lastIndexOf(">")+1),s=a.textfield1.split("||")[1],s=s.slice(s.lastIndexOf(">")+1),l=a,e.auserList.push({id:a.loginid,value:a.lastname+",",label:l.lastname+" "+l.mobile+" "+l.textfield1.split("||")[1].replace("中心",""),name:""+a.lastname,tel:a.mobile,address:o+"||"+a.textfield1.split("||")[1],company:o,department:s,mail:e.item.dealMail,isDefault:!e.auserList.length})}catch(e){console.log(e)}try{e.auserList=e.auserList.filter(function(t,n){return t.isDefault=0==n,n==e.auserList.findIndex(function(e,n){return e.id==t.id})})}catch(e){console.log(e)}}case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),console.log(t.t0);case 15:case"end":return t.stop()}},t,e,[[1,12]])}))()},queryFinanceArchiveMan:function(){var e=this;return A()(m.a.mark(function t(){var n,a,i,o,s;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.item.finance_name||e.item.finance,t.prev=1,!n){t.next=10;break}return t.next=5,Betools.manage.queryUserByNameHRM(n.trim());case 5:return a=t.sent,t.next=8,Betools.manage.queryUserByNameHRM((e.item.finance||"").trim());case 8:if(i=t.sent,a){if(Array.isArray(a)){i&&(a=[].concat(r()(a),r()(i)));try{a.map(function(t,n){var a=t.textfield1.split("||")[0];a=a.slice(a.lastIndexOf(">")+1);var i=t.textfield1.split("||")[1];i=i.slice(i.lastIndexOf(">")+1),e.financeuserList.push({id:t.loginid,name:t.lastname,tel:"",address:a+"||"+t.textfield1.split("||")[1],company:a,department:i,mail:t.email,isDefault:!n})}),e.item.finance_name=a[0].lastname,e.item.finance=a[0].loginid}catch(e){console.log(e)}}else try{o=a.textfield1.split("||")[0],o=o.slice(o.lastIndexOf(">")+1),s=a.textfield1.split("||")[1],s=s.slice(s.lastIndexOf(">")+1),e.item.finance=a.loginid,e.item.finance_name=a.lastname,e.financeuserList.push({id:a.loginid,name:""+a.lastname,tel:a.mobile,address:o+"||"+a.textfield1.split("||")[1],company:o,department:s,mail:e.item.dealMail,isDefault:!e.financeuserList.length})}catch(e){console.log(e)}try{e.financeuserList=e.financeuserList.filter(function(t,n){return t.isDefault=0==n,n==e.financeuserList.findIndex(function(e,n){return e.id==t.id})})}catch(e){console.log(e)}}case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),console.log(t.t0);case 15:case"end":return t.stop()}},t,e,[[1,12]])}))()},queryRecordArchiveMan:function(){var e=this;return A()(m.a.mark(function t(){var n,a,i,o,s;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.item.record_name||e.item.record,t.prev=1,!n){t.next=10;break}return t.next=5,Betools.manage.queryUserByNameHRM(n.trim());case 5:return a=t.sent,t.next=8,Betools.manage.queryUserByNameHRM((e.item.record||"").trim());case 8:if(i=t.sent,a){if(Array.isArray(a)){i&&(a=[].concat(r()(a),r()(i)));try{a.map(function(t,n){var a=t.textfield1.split("||")[0];a=a.slice(a.lastIndexOf(">")+1);var i=t.textfield1.split("||")[1];i=i.slice(i.lastIndexOf(">")+1),e.recorduserList.push({id:t.loginid,name:t.lastname,tel:"",address:a+"||"+t.textfield1.split("||")[1],company:a,department:i,mail:t.email,isDefault:!n})}),e.item.record_name=a[0].lastname,e.item.record=a[0].loginid}catch(e){console.log(e)}}else try{o=a.textfield1.split("||")[0],o=o.slice(o.lastIndexOf(">")+1),s=a.textfield1.split("||")[1],s=s.slice(s.lastIndexOf(">")+1),e.item.record=a.loginid,e.item.record_name=a.lastname,e.recorduserList.push({id:a.loginid,name:""+a.lastname,tel:a.mobile,address:o+"||"+a.textfield1.split("||")[1],company:o,department:s,mail:e.item.dealMail,isDefault:!e.recorduserList.length})}catch(e){console.log(e)}try{e.recorduserList=e.recorduserList.filter(function(t,n){return t.isDefault=0==n,n==e.recorduserList.findIndex(function(e,n){return e.id==t.id})})}catch(e){console.log(e)}}case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),console.log(t.t0);case 15:case"end":return t.stop()}},t,e,[[1,12]])}))()},queryFrontMan:function(){var e=this;return A()(m.a.mark(function t(){var n,a,i,o,s;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.item.front_name||e.item.front,t.prev=1,!n){t.next=10;break}return t.next=5,Betools.manage.queryUserByNameHRM(n.trim());case 5:return a=t.sent,t.next=8,Betools.manage.queryUserByNameHRM(e.item.front.trim());case 8:if(i=t.sent,a){if(Array.isArray(a)){i&&(a=[].concat(r()(a),r()(i)));try{a.map(function(t,n){var a=t.textfield1.split("||")[0];a=a.slice(a.lastIndexOf(">")+1);var i=t.textfield1.split("||")[1];i=i.slice(i.lastIndexOf(">")+1),e.fuserList.push({id:t.loginid,name:t.lastname,tel:"",address:a+"||"+t.textfield1.split("||")[1],company:a,department:i,mail:t.email,isDefault:!n})})}catch(e){console.log(e)}}else try{o=a.textfield1.split("||")[0],o=o.slice(o.lastIndexOf(">")+1),s=a.textfield1.split("||")[1],s=s.slice(s.lastIndexOf(">")+1),e.item.front=a.loginid,e.fuserList.push({id:a.loginid,name:""+a.lastname,tel:a.mobile,address:o+"||"+a.textfield1.split("||")[1],company:o,department:s,mail:e.item.dealMail,isDefault:!e.fuserList.length})}catch(e){console.log(e)}try{e.fuserList=e.fuserList.filter(function(t,n){return t.isDefault=0==n,n==e.fuserList.findIndex(function(e,n){return e.id==t.id})})}catch(e){console.log(e)}}case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),console.log(t.t0);case 15:case"end":return t.stop()}},t,e,[[1,12]])}))()},querySealMan:function(){var e=this;return A()(m.a.mark(function t(){var n,a,i,o,s;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.item.sealman||e.item.seal,t.prev=1,!n){t.next=10;break}return t.next=5,Betools.manage.queryUserByNameHRM(n.trim());case 5:return a=t.sent,t.next=8,Betools.manage.queryUserByNameHRM(e.item.seal.trim());case 8:if(i=t.sent,a){if(Array.isArray(a)){i&&(a=[].concat(r()(a),r()(i)));try{a.map(function(t,n){var a=t.textfield1.split("||")[0];a=a.slice(a.lastIndexOf(">")+1);var i=t.textfield1.split("||")[1];i=i.slice(i.lastIndexOf(">")+1),e.suserList.push({id:t.loginid,name:t.lastname,tel:"",address:a+"||"+t.textfield1.split("||")[1],company:a,department:i,mail:t.email,isDefault:!n})})}catch(e){console.log(e)}}else try{o=a.textfield1.split("||")[0],o=o.slice(o.lastIndexOf(">")+1),s=a.textfield1.split("||")[1],s=s.slice(s.lastIndexOf(">")+1),e.sealuserid=a.loginid,e.suserList.push({id:a.loginid,name:a.lastname,tel:a.mobile,address:o+"||"+a.textfield1.split("||")[1],company:o,department:s,mail:e.item.dealMail,isDefault:!e.suserList.length})}catch(e){console.log(e)}try{e.suserList=e.suserList.filter(function(t,n){return t.isDefault=0==n,n==e.suserList.findIndex(function(e,n){return e.id==t.id})})}catch(e){console.log(e)}}case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),console.log(t.t0);case 15:case"end":return t.stop()}},t,e,[[1,12]])}))()},selectFrontUser:function(e){var t=this;return A()(m.a.mark(function e(){var n,a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Betools.tools.sleep(0);case 2:n=t.fuserid,a=t.fuserList.find(function(e,t){return n==e.id}),t.item.front_name=a.name,t.item.front=n;case 6:case"end":return e.stop()}},e,t)}))()},selectFinanceUser:function(e){var t=this;return A()(m.a.mark(function e(){var n,a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Betools.tools.sleep(0);case 2:n=t.financeUserid,a=t.financeuserList.find(function(e,t){return n==e.id}),t.item.finance_name=a.name,t.item.finance=n,t.item.archive_name=t.item.finance_name+","+t.item.record_name,t.item.archive=t.item.finance+","+t.item.record;case 8:case"end":return e.stop()}},e,t)}))()},selectRecordUser:function(e){var t=this;return A()(m.a.mark(function e(){var n,a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Betools.tools.sleep(0);case 2:n=t.recordUserid,a=t.recorduserList.find(function(e,t){return n==e.id}),t.item.record_name=a.name,t.item.record=n,t.item.archive_name=t.item.finance_name+","+t.item.record_name,t.item.archive=t.item.finance+","+t.item.record;case 8:case"end":return e.stop()}},e,t)}))()},selectSealUser:function(e){var t=this;return A()(m.a.mark(function e(){var n,a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Betools.tools.sleep(0);case 2:n=t.suserid,a=t.suserList.find(function(e,t){return n==e.id}),t.item.sealman=a.name,t.item.seal=n,t.sealuserid=n;case 7:case"end":return e.stop()}},e,t)}))()},selectArchiveUser:function(e){var t=this;return A()(m.a.mark(function e(){var n,a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Betools.tools.sleep(0);case 2:n=[],a=[],t.$refs.checkboxGroup.$data.checkboxValues.map(function(e,i){1==e&&(n.push(t.auserList[i].id),a.push(t.auserList[i].name))}),t.item.archive_name=a.join(","),t.item.archive=n.join(",");case 7:case"end":return e.stop()}},e,t)}))()},archiveTypeConfirm:function(e){this.item.archiveType=e,this.tag.showPicker=!1},encodeURI:function(e){return window.encodeURIComponent(e)},getUrlParam:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),n=window.location.hash.substr(window.location.hash.indexOf("?")+1).match(t);return null!=n?decodeURI(n[2]):null},queryInfo:function(){var e=this;return A()(m.a.mark(function t(){var n,a,i,o,r,s,l,c,d;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.iswechat=Betools.tools.isWechat(),t.next=4,e.weworkLogin();case 4:return e.userinfo=t.sent,n=e,n.item.id=Betools.tools.getUrlParam("id"),n.item.status=e.statusType[Betools.tools.getUrlParam("statustype")],n.item.type=Betools.tools.getUrlParam("type"),e.view=Betools.tools.getUrlParam("view"),e.back=Betools.tools.getUrlParam("back")||"/app",t.next=13,Betools.query.queryTableData("bs_seal_regist",n.item.id);case 13:if(a=t.sent,!Betools.tools.isNull(a)&&"已测试"!=a.status&&"已退回"!=a.status&&"已作废"!=a.status&&"已完成"!=a.status&&"已用印"!=a.status){t.next=17;break}return t.next=17,e.deleteProcessLog();case 17:if(e.item={id:n.item.id,serialid:a.serialid,createtime:a.create_time?dayjs(a.create_time).format("YYYY-MM-DD HH:mm:ss"):"",filename:a.filename,count:a.count,dealDepart:a.deal_depart,dealManager:a.deal_manager,dealMail:a.deal_mail,username:a.username,approveType:a.approve_type,contractId:a.contract_id,signman:a.sign_man,workno:a.workno,sealtime:a.seal_time?dayjs(a.seal_time).format("YYYY-MM-DD HH:mm:ss"):"",finance_time:a.finance_time?dayjs(a.finance_time).format("YYYY-MM-DD HH:mm:ss"):"",doc_time:a.doc_time?dayjs(a.doc_time).format("YYYY-MM-DD HH:mm:ss"):"",receive_time:a.receive_time?dayjs(a.receive_time).format("YYYY-MM-DD HH:mm:ss"):"",done_time:a.done_time?dayjs(a.done_time).format("YYYY-MM-DD HH:mm:ss"):"",front_time:a.front_time?dayjs(a.front_time).format("YYYY-MM-DD HH:mm:ss"):"",send_time:a.send_time?dayjs(a.send_time).format("YYYY-MM-DD HH:mm:ss"):"",sealman:a.seal_man,ordertype:a.order_type,mobile:a.mobile,send_mobile:a.send_mobile,send_location:a.send_location,sealtype:a.seal_type?a.seal_type:a.contract_id?"合同类":"非合同类",seal_category:a.seal_category?a.seal_category:"合同专用章",front:a.front,seal:a.seal,front_name:a.front_name,archive:a.archive,archive_name:a.archive_name,finance:a.finance,finance_name:a.finance_name,record:a.record,record_name:a.record_name,confirmStatus:"",prefix:a.prefix,status:a.status,type:n.item.type,company:a.company,partner:a.partner,seal_group_ids:a.seal_group_ids,seal_group_names:a.seal_group_names,message:"同意"},!e.item.seal||e.item.front&&e.item.finance&&e.item.record&&e.item.archive||(e.item.front,e.item.seal,e.item.finance,e.item.seal,e.item.record,e.item.seal,e.item.archive,e.item.seal,e.item.front_name,e.item.sealman,e.item.finance_name,e.item.sealman,e.item.record_name,e.item.sealman,e.item.archive_name,e.item.sealman),n=e,!n.item.front){t.next=25;break}return t.next=23,Betools.manage.queryUsernameByIDs(n.item.front.split(",").map(function(e){return"'"+e+"'"}).join(","));case 23:i=t.sent,i.map(function(t,n){var a=t.textfield1.split("||")[0];a=a.slice(a.lastIndexOf(">")+1);var i=t.textfield1.split("||")[1];i=i.slice(i.lastIndexOf(">")+1),e.fuserList.push({id:t.loginid,name:t.lastname,tel:"",address:a+"||"+t.textfield1.split("||")[1],company:a,department:i,mail:t.email,isDefault:!e.suserList.length})});case 25:if(!n.item.archive){t.next=34;break}return o=[],r=[],t.next=30,Betools.manage.queryUsernameByIDs(n.item.archive.split(",").map(function(e){return"'"+e+"'"}).join(","));case 30:s=t.sent,s.map(function(t,n){var a=t.textfield1.split("||")[0];a=a.slice(a.lastIndexOf(">")+1);var i=t.textfield1.split("||")[1];i=i.slice(i.lastIndexOf(">")+1),o.push(t.lastname),r.push(t.loginid),e.auserList.push({id:t.loginid,value:t.lastname+",",label:t.lastname+" "+t.mobile+" "+t.textfield1.split("||")[1].replace("中心",""),name:t.lastname,tel:"",address:a+"||"+t.textfield1.split("||")[1],company:a,department:i,mail:t.email,isDefault:!e.auserList.length})}),e.item.archive=r.join(","),e.item.archive_name=o.join(",");case 34:if(!n.item.prefix||"待用印"!=n.item.status){t.next=37;break}return t.next=37,e.queryHContract();case 37:return t.next=39,Betools.query.queryRoleGroupList("SEAL_ADMIN",a.seal);case 39:if(l=t.sent,l&&l.length>0&&l[0].zonename?e.zonename=l[0].zonename:e.zonename="",!Betools.tools.isNull(a.seal_group_ids)){t.next=53;break}return c=l[0].userlist,d=l[0].enuserlist,Betools.tools.isNull(c)&&(c=seal,d=seal_man),t.prev=45,t.next=48,Betools.manage.patchTableData("bs_seal_regist",id,{seal_group_ids:c,seal_group_names:d});case 48:t.next=53;break;case 50:t.prev=50,t.t0=t.catch(45),console.log(t.t0);case 53:return e.item.contractId=e.item.contractId||a.contract_id,t.next=56,e.queryFinanceArchiveMan();case 56:return t.next=58,e.queryRecordArchiveMan();case 58:return t.next=60,e.queryProcessLog();case 60:t.next=65;break;case 62:t.prev=62,t.t1=t.catch(0),console.log(t.t1);case 65:case"end":return t.stop()}},t,e,[[0,62],[45,50]])}))()},saveAsFile:function(e,t){var n=this;return A()(m.a.mark(function a(){return m.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:try{window.saveAs(e,t)}catch(e){console.log(e)}case 1:case"end":return n.stop()}},a,n)}))()},userStatus:function(){var e=this;return A()(m.a.mark(function t(){var n;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Betools.storage.getStore("system_userinfo");case 3:if(n=t.sent,!Betools.tools.isNull(n)){t.next=9;break}return vant.Toast("尚未登录！"),t.next=8,e.clearLoginInfo();case 8:e.$router.push("/login");case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}},t,e,[[0,11]])}))()},queryProcessLog:function(){var e=this;return A()(m.a.mark(function t(){var n,a,i;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=Betools.tools.getUrlParam("id"),a=Betools.tools.getUrlParam("pid"),t.prev=2,t.next=5,Betools.workflow.queryPRLogHistoryByDataID(n);case 5:if(e.processLogList=t.sent,!(e.processLogList&&e.processLogList.length>0)){t.next=14;break}if(e.processLogList.map(function(e){e.create_time=dayjs(e.create_time).format("YYYY-MM-DD HH:mm"),e.unique=e.employee+" "+e.action+" "+e.action_opinion+" "+e.create_time+" "}),e.processLogList=e.processLogList.filter(function(t,n){return e.processLogList.findIndex(function(e){return t.unique==e.unique})==n}),e.processLogList.sort(),i=e.processLogList[e.processLogList.length-1],!("完成"==i.action&&i.action_opinion.includes("已完成")||"确认"==i.action&&i.action_opinion.includes("已驳回")||"驳回"==i.action&&i.action_opinion.includes("已退回"))){t.next=14;break}return t.next=14,e.deleteProcessLog();case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(2),console.log(t.t0);case 19:case"end":return t.stop()}},t,e,[[2,16]])}))()},deleteProcessLog:function(){var e=this;return A()(m.a.mark(function t(){var n,a,i,o;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Betools.tools.getUrlParam("id"),a=Betools.tools.getUrlParam("pid"),!Betools.tools.isNull(n)&&!Betools.tools.isNull(a)){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,Betools.storage.getStore("system_userinfo");case 6:return i=e.sent,e.next=9,Betools.task.queryProcessLogWaitSeal(i.username,i.realname,0,1e3);case 9:if(o=e.sent,o=o.filter(function(e){return e.id==n&&e.pid==a}),!(o.length>0)){e.next=14;break}return e.next=14,Betools.workflow.deleteViewProcessLog(o);case 14:case"end":return e.stop()}},t,e)}))()},handleAgree:function(){var e=this;return A()(m.a.mark(function t(){var n,a,o,r,s,c,d,A,p,u,f,x,g,b,v,h,B,w,C,_;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.validField("message"),n="合同编号",t.next=4,Betools.storage.getStore("system_userinfo");case 4:if(a=t.sent,o=Betools.tools.getUrlParam("pid"),!Betools.tools.isNull(a)){t.next=11;break}return vant.Toast("尚未登录！"),t.next=10,e.clearLoginInfo();case 10:e.$router.push("/login");case 11:if(r=e.item.company,!e.item.seal||e.item.front&&e.item.finance&&e.item.record&&e.item.archive||(e.item.front,e.item.seal,e.item.finance,e.item.seal,e.item.record,e.item.seal,e.item.archive,e.item.seal,e.item.front_name,e.item.sealman,e.item.finance_name,e.item.sealman,e.item.record_name,e.item.sealman,e.item.archive_name,e.item.sealman),s="合同类"==e.item.sealtype?i()({sealtype:"",ordertype:"",filename:"",count:"",dealDepart:"",dealManager:"",username:x,dealMail:"",approveType:"",signman:"",workno:"",company:"",seal:"",front:"",finnace:"",record:"",front_name:"",finnace_name:"",record_name:""}):i()({sealtype:"",ordertype:"",filename:"",count:"",dealDepart:"",dealManager:"",username:x,dealMail:"",approveType:"",signman:"",workno:"",company:"",seal:""}),""==(c=s.find(function(t){return e.validField(),!e.validFieldConfirm(t)}))||null==c){t.next=19;break}return t.next=18,vant.Dialog.alert({title:"温馨提示",message:"请检查表单填写内容，确认内容是否填写完整无误！"});case 18:return t.abrupt("return",!1);case 19:if(n="合同类"===e.item.sealtype?"合同编号":"流水编号",r){t.next=24;break}return t.next=23,vant.Dialog.confirm({title:"用印确认",message:"请输入用印公司名称后，在进行确认操作！"});case 23:return t.abrupt("return");case 24:if(!(d=e.item.contractId)||!d.includes("NaN")||"合同类"!=e.item.sealtype){t.next=29;break}return t.next=28,vant.Dialog.confirm({title:"用印确认",message:"此合同编号有误，请检查是否符合编码规则！"});case 28:return t.abrupt("return",t.sent);case 29:return t.next=32,Betools.query.queryTableDataByWhereSQL("bs_seal_regist","_where=(contract_id,eq,"+d+")~and(status,in,已用印,已领取,财务归档,已寄送,档案归档,移交前台)");case 32:if(A=t.sent,!("合同类"==e.item.sealtype&&A&&A.length>0)){t.next=37;break}return t.next=36,vant.Dialog.confirm({title:"用印确认",message:"此合同编号已经存在，请刷新页面后，重试用印操作！"});case 36:return t.abrupt("return",t.sent);case 37:return t.next=39,vant.Dialog.confirm({title:"用印确认",message:"请检查合同编号是否需要修改，并确认进行‘已用印’处理，确认后推送通知！"});case 39:return p=Betools.tools.getUrlParam("groupid")||"Group_LD",u=Betools.tools.getUrlParam("id"),f=e.item.dealMail,x=e.item.username,g=e.item.prefix,b="已向用印申请人@"+e.item.dealManager+"推送邮件通知！",v=dayjs().format("YYYY-MM-DD HH:mm:ss"),h=encodeURIComponent(window.BECONFIG.domain.replace("www","wechat")+"/#/app/sealview?id="+u+"&statustype=seal&type=front"),B=encodeURIComponent(window.BECONFIG.domain.replace("www","wechat")+"/#/app/sealreceive?id="+u+"&type=receive"),t.prev=48,t.next=51,Betools.manage.patchTableData("bs_seal_regist",u,{id:u,contract_id:d,status:"已用印",seal_time:v,front:e.item.front,front_name:e.item.front_name,archive:e.item.archive,archive_name:e.item.archive_name,finance:e.item.finance,finance_name:e.item.finance_name,record:e.item.record,record_name:e.item.record_name,prefix:g,company:r,partner:e.item.partner});case 51:t.next=56;break;case 53:t.prev=53,t.t0=t.catch(48),console.log(t.t0);case 56:return t.prev=56,t.next=59,superagent.get(window.BECONFIG.restAPI+"/api/v1/mail/用印资料领取通知/文件:‘"+e.item.filename+"’已用印，"+n+":"+e.item.contractId+"，系统编号："+u+"，经办人："+e.item.dealManager+"，请及时领取/"+f+"?rurl="+B).set("accept","json");case 59:t.next=64;break;case 61:t.prev=61,t.t1=t.catch(56),console.log(t.t1);case 64:return t.prev=64,t.next=67,superagent.get(window.BECONFIG.restAPI+"/api/v1/weappms/"+x+"/文件:‘"+e.item.filename+"’已用印，请及时领取。日期："+e.item.createtime+",用印类型："+e.item.sealtype+",文件："+e.item.filename+","+n+"："+e.item.contractId+"?rurl="+B).set("accept","json");case 67:t.next=72;break;case 69:t.prev=69,t.t2=t.catch(64),console.log(t.t2);case 72:if("合同类"!==e.item.sealtype){t.next=89;break}return t.prev=73,t.next=76,superagent.get(window.BECONFIG.restAPI+"/api/v1/wework/用印资料等待移交通知/文件:‘"+e.item.filename+"’已用印，"+n+":"+e.item.contractId+"，系统编号："+u+"，经办人："+e.item.dealManager+"，请等待资料送至前台!?type=front&rurl="+h+"&id="+u+"&userid="+e.item.dealManager).set("accept","json");case 76:t.next=81;break;case 78:t.prev=78,t.t3=t.catch(73),console.log(t.t3);case 81:return t.prev=81,t.next=84,superagent.get(window.BECONFIG.restAPI+"/api/v1/weappms/"+Betools.workconfig.group[p].front+","+e.item.front+"/文件:‘"+e.item.filename+"’已用印，请等待资料送至前台。日期："+e.item.createtime+",用印类型："+e.item.sealtype+",文件："+e.item.filename+","+n+"："+e.item.contractId+"?rurl="+h).set("accept","json");case 84:t.next=89;break;case 86:t.prev=86,t.t4=t.catch(81),console.log(t.t4);case 89:return e.item.status="已用印",e.item.sealtime=v,w={id:Betools.tools.queryUniqueID(),table_name:"bs_seal_regist",main_value:u,proponents:x,business_data_id:u,business_code:"000000000",process_name:"用印流程审批",employee:a.realname,approve_user:a.username,action:"同意",action_opinion:e.item.message+"[已用印]",operate_time:dayjs().format("YYYY-MM-DD HH:mm:ss"),functions_station:a.position,process_station:"用印审批[印章管理]",business_data:l()(e.item),content:e.item.filename+" #经办人: "+e.item.username,process_audit:e.item.workno+"##"+e.item.serialid,create_time:dayjs().format("YYYY-MM-DD HH:mm:ss"),relate_data:"",origin_data:""},t.next=94,Betools.workflow.approveViewProcessLog(w);case 94:return C={id:Betools.tools.queryUniqueID(),table_name:"bs_seal_regist",main_value:u,proponents:e.item.front,business_data_id:u,business_code:"000000000",process_name:"用印流程审批",employee:e.item.front_name,approve_user:e.item.front,action:"",action_opinion:"用印申请[待移交]",operate_time:dayjs().format("YYYY-MM-DD HH:mm:ss"),functions_station:"印章管理",process_station:"用印审批[印章管理]",business_data:l()(e.item),content:e.item.filename+" #待移交 #经办人: "+e.item.username,process_audit:e.item.workno+"##"+e.item.serialid,create_time:dayjs().format("YYYY-MM-DD HH:mm:ss"),relate_data:"",origin_data:""},t.next=97,Betools.workflow.taskViewProcessLog(C);case 97:return t.prev=97,t.next=100,Betools.task.queryProcessLogWaitSeal(a.username,a.realname,0,1e3);case 100:return _=t.sent,_=_.filter(function(e){return e.id==u&&e.pid==o}),t.next=104,Betools.workflow.deleteViewProcessLog(_);case 104:t.next=109;break;case 106:t.prev=106,t.t5=t.catch(97),console.log(t.t5);case 109:return t.next=111,vant.Dialog.alert({title:"温馨提示",message:b});case 111:case"end":return t.stop()}},t,e,[[48,53],[56,61],[64,69],[73,78],[81,86],[97,106]])}))()},handleDisagree:function(){var e=this;return A()(m.a.mark(function t(){var n,a,i,o,r,s,c,d,A,p,u,f,x,g;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.validField("message"),n="合同编号",t.next=4,Betools.storage.getStore("system_userinfo");case 4:if(a=t.sent,i=Betools.tools.getUrlParam("pid"),!Betools.tools.isNull(a)){t.next=11;break}return vant.Toast("尚未登录！"),t.next=10,e.clearLoginInfo();case 10:e.$router.push("/login");case 11:if(o=e.item.company){t.next=16;break}return t.next=15,vant.Dialog.confirm({title:"用印确认",message:"请输入用印公司名称后，在进行确认操作！"});case 15:return t.abrupt("return");case 16:if(e.item.message&&"同意"!=e.item.message){t.next=20;break}return t.next=19,vant.Dialog.confirm({title:"用印作废",message:"进行‘作废’处理时，必须填写备注信息，说明用印错误原因！"});case 19:return t.abrupt("return");case 20:return t.next=22,vant.Dialog.confirm({title:"用印退回",message:"请确认进行‘已退回’处理，提交后推送通知！"});case 22:return n="合同类"===e.item.sealtype?"合同编号":"流水编号",r=Betools.tools.getUrlParam("groupid")||"Group_LD",s=Betools.tools.getUrlParam("id"),c=e.item.dealMail,d=e.item.username,A=e.item.message,p=e.item.contractId.includes("]")?e.item.contractId.replace(e.item.contractId.split("]")[1],"0000"):e.item.contractId.includes(")")?e.item.contractId.replace(e.item.contractId.split(")")[1],"0000"):e.item.contractId,u=dayjs().format("YYYY-MM-DD HH:mm:ss"),f=encodeURIComponent(window.BECONFIG.domain.replace("www","wechat")+"/#/app/sealedit?id="+s+"&type=done&res=edit"),t.prev=31,t.next=34,Betools.manage.patchTableData("bs_seal_regist",s,{id:s,status:"已退回",message:A,company:o,seal_time:u,contract_id:p});case 34:t.next=39;break;case 36:t.prev=36,t.t0=t.catch(31),console.log(t.t0);case 39:return t.prev=39,t.next=42,superagent.get(window.BECONFIG.restAPI+"/api/v1/mail/用印资料作废通知/文件:‘"+e.item.filename+"’已退回，请及时到印章管理处（@"+e.item.sealman+"）修改用印登录信息，"+n+":"+e.item.contractId+";作废原因:"+A+"/"+c).set("accept","json");case 42:t.next=47;break;case 44:t.prev=44,t.t1=t.catch(39),console.log(t.t1);case 47:return t.prev=47,t.next=50,superagent.get(window.BECONFIG.restAPI+"/api/v1/weappms/"+d+"/文件:‘"+e.item.filename+"’已退回，请及时到印章管理处（@"+e.item.sealman+"）修改用印登录信息，"+n+":"+e.item.contractId+";作废原因:"+A+"?rurl="+f).set("accept","json");case 50:t.next=55;break;case 52:t.prev=52,t.t2=t.catch(47),console.log(t.t2);case 55:return e.item.status="已退回",e.item.sealtime=u,t.next=59,vant.Dialog.alert({title:"温馨提示",message:"已向用印申请人@"+e.item.dealManager+"推送通知！"});case 59:return x={id:Betools.tools.queryUniqueID(),table_name:"bs_seal_regist",main_value:s,proponents:d,business_data_id:s,business_code:"000000000",process_name:"用印流程审批",employee:a.realname,approve_user:a.username,action:"驳回",action_opinion:e.item.message+"[已退回]",operate_time:dayjs().format("YYYY-MM-DD HH:mm:ss"),functions_station:a.position,process_station:"用印审批[印章管理]",business_data:l()(e.item),content:e.item.filename+" #经办人: "+e.item.username,process_audit:e.item.workno+"##"+e.item.serialid,create_time:dayjs().format("YYYY-MM-DD HH:mm:ss"),relate_data:"",origin_data:""},t.next=62,Betools.workflow.approveViewProcessLog(x);case 62:return t.prev=62,t.next=65,Betools.task.queryProcessLogWaitSeal(a.username,a.realname,0,1e3);case 65:return g=t.sent,g=g.filter(function(e){return e.id==s&&e.pid==i}),t.next=69,Betools.workflow.deleteViewProcessLog(g);case 69:t.next=74;break;case 71:t.prev=71,t.t3=t.catch(62),console.log(t.t3);case 74:case"end":return t.stop()}},t,e,[[31,36],[39,44],[47,52],[62,71]])}))()},handleSending:function(){var e=this;return A()(m.a.mark(function t(){var n,a,i,o,r,s,c,d,A,p;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n="合同编号",t.next=3,Betools.storage.getStore("system_userinfo");case 3:if(a=t.sent,!Betools.tools.isNull(a)){t.next=9;break}return vant.Toast("尚未登录！"),t.next=8,e.clearLoginInfo();case 8:e.$router.push("/login");case 9:return t.next=11,vant.Dialog.confirm({title:"用印资料寄送",message:"请确认进行‘寄送’操作，确认前请先进行线下寄件操作！"});case 11:return n="合同类"===e.item.sealtype?"合同编号":"流水编号",i=Betools.tools.getUrlParam("groupid")||"Group_LD",o=Betools.tools.getUrlParam("id"),r=e.item.dealMail,s="用印资料寄送成功！",c=e.item.username,d=dayjs().format("YYYY-MM-DD HH:mm:ss"),A=encodeURIComponent(window.BECONFIG.domain.replace("www","wechat")+"/#/app/sealview?id="+o+"&statustype=done&type=done"),Betools.manage.patchTableData("bs_seal_regist",o,{id:o,status:"已寄送",send_time:d}),e.item.status="已寄送",t.next=23,vant.Dialog.alert({title:"温馨提示",message:s});case 23:return p={id:Betools.tools.queryUniqueID(),table_name:"bs_seal_regist",main_value:o,proponents:c,business_data_id:o,business_code:"000000000",process_name:"用印流程审批",employee:a.realname,approve_user:a.username,action:"同意",action_opinion:"寄送合同资料[已寄送]",operate_time:dayjs().format("YYYY-MM-DD HH:mm:ss"),functions_station:a.position,process_station:"用印审批[印章管理]",business_data:l()(e.item),content:e.item.filename+" #经办人: "+e.item.username,process_audit:e.item.workno+"##"+e.item.serialid,create_time:dayjs().format("YYYY-MM-DD HH:mm:ss"),relate_data:"",origin_data:""},t.next=26,Betools.workflow.approveViewProcessLog(p);case 26:case"end":return t.stop()}},t,e)}))()},handleConfirm:function(){var e=this;return A()(m.a.mark(function t(){var n,a,i,o,r,s,c,d,A,p,u,f,x;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n="合同编号",t.next=3,Betools.storage.getStore("system_userinfo");case 3:if(a=t.sent,i=Betools.tools.getUrlParam("pid"),!Betools.tools.isNull(a)){t.next=10;break}return vant.Toast("尚未登录！"),t.next=9,e.clearLoginInfo();case 9:e.$router.push("/login");case 10:return t.next=12,vant.Dialog.confirm({title:"用印资料移交",message:"请确认进行‘移交前台’操作，确认后财务/档案推送通知！"});case 12:n="合同类"===e.item.sealtype?"合同编号":"流水编号",o=Betools.tools.getUrlParam("groupid")||"Group_LD",r=Betools.tools.getUrlParam("id"),s=e.item.dealMail,c="已向财务/档案相关人员推送邮件通知！",d=e.item.username,A=dayjs().format("YYYY-MM-DD HH:mm:ss"),p=encodeURIComponent(window.BECONFIG.domain.replace("www","wechat")+"/#/app/sealview?id="+r+"&statustype=done&type=done"),u=encodeURIComponent(window.BECONFIG.domain.replace("www","wechat")+"/#/app/sealreceive?id="+r+"&type=done");try{Betools.manage.patchTableData("bs_seal_regist",r,{id:r,status:"移交前台",front_time:A})}catch(e){console.log(e)}return t.prev=22,t.next=25,superagent.get(window.BECONFIG.restAPI+"/api/v1/mail/用印资料移交前台通知("+e.item.contractId+")/文件:‘"+e.item.filename+"’已移交前台，"+n+":"+e.item.contractId+"，系统编号："+r+"，经办人："+e.item.dealManager+"，请等待进行归档处理/"+s).set("accept","json");case 25:t.next=30;break;case 27:t.prev=27,t.t0=t.catch(22),console.log(t.t0);case 30:return t.prev=30,t.next=33,superagent.get(window.BECONFIG.restAPI+"/api/v1/weappms/"+d+"/文件:‘"+e.item.filename+"’已移交前台，"+n+":"+e.item.contractId+"，系统编号："+r+"，经办人："+e.item.dealManager+"，请等待进行归档处理?rurl="+u).set("accept","json");case 33:t.next=38;break;case 35:t.prev=35,t.t1=t.catch(30),console.log(t.t1);case 38:return t.prev=38,t.next=41,superagent.get(window.BECONFIG.restAPI+"/api/v1/wework/用印资料归档请求通知/文件:‘"+e.item.filename+"’已移交前台，"+n+":"+e.item.contractId+"，系统编号："+r+"，经办人："+e.item.dealManager+"，请至前台进行合同归档处理!?type=done&rurl="+p+"&id="+r+"&userid="+e.item.dealManager).set("accept","json");case 41:t.next=46;break;case 43:t.prev=43,t.t2=t.catch(38),console.log(t.t2);case 46:return t.prev=46,t.next=49,superagent.get(window.BECONFIG.restAPI+"/api/v1/weappms/"+Betools.workconfig.group[o].archive+","+e.item.archive+"/文件:‘"+e.item.filename+"’已移交前台，"+e.item.createtime+",用印类型："+e.item.sealtype+",文件："+e.item.filename+","+n+"："+e.item.contractId+"，系统编号："+r+"，经办人："+e.item.dealManager+"?rurl="+p).set("accept","json");case 49:t.next=54;break;case 51:t.prev=51,t.t3=t.catch(46),console.log(t.t3);case 54:return e.item.status="移交前台",t.next=57,vant.Dialog.alert({title:"温馨提示",message:c});case 57:return f={id:Betools.tools.queryUniqueID(),table_name:"bs_seal_regist",main_value:r,proponents:d,business_data_id:r,business_code:"000000000",process_name:"用印流程审批",employee:a.realname,approve_user:a.username,action:"同意",action_opinion:"移交合同资料至前台[移交前台]",operate_time:dayjs().format("YYYY-MM-DD HH:mm:ss"),functions_station:a.position,process_station:"用印审批[印章管理]",business_data:l()(e.item),content:e.item.filename+" #经办人: "+e.item.username,process_audit:e.item.workno+"##"+e.item.serialid,create_time:dayjs().format("YYYY-MM-DD HH:mm:ss"),relate_data:"",origin_data:""},t.next=60,Betools.workflow.approveViewProcessLog(f);case 60:return t.next=62,Betools.task.queryProcessLogWaitSeal(a.username,a.realname,0,1e3);case 62:return x=t.sent,x=x.filter(function(e){return e.id==r&&e.pid==i}),t.next=66,Betools.workflow.deleteViewProcessLog(x);case 66:case"end":return t.stop()}},t,e,[[22,27],[30,35],[38,43],[46,51]])}))()},handleArchive:function(){var e=this;return A()(m.a.mark(function t(){var n,a,i,o,r,s,c,d,A,p,u,f;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(""!=e.item.archiveType&&null!=e.item.archiveType){t.next=4;break}return t.next=3,vant.Dialog.alert({title:"温馨提示",message:"请选择归档类型！"});case 3:return t.abrupt("return",!1);case 4:return t.next=6,Betools.storage.getStore("system_userinfo");case 6:if(n=t.sent,!Betools.tools.isNull(n)){t.next=12;break}return vant.Toast("尚未登录！"),t.next=11,e.clearLoginInfo();case 11:e.$router.push("/login");case 12:return t.next=14,vant.Dialog.confirm({title:"用印资料归档",message:"请确认进行‘资料归档’操作！"});case 14:return a=Betools.tools.getUrlParam("groupid")||"Group_LD",i=Betools.tools.getUrlParam("id"),o=e.item.dealMail,r="已向财务/档案相关人员推送邮件通知！",s=e.item.username,c=dayjs().format("YYYY-MM-DD HH:mm:ss"),d=encodeURIComponent(window.BECONFIG.domain.replace("www","wechat")+"/#/app/sealview?id="+i+"&statustype=archive&type=archive"),A=null,"财务归档"==e.item.archiveType?A={id:i,status:"财务归档",finance_time:c}:"档案归档"==e.item.archiveType&&(A={id:i,status:"档案归档",doc_time:c}),t.next=25,Betools.manage.patchTableData("bs_seal_regist",i,A);case 25:return t.next=27,Betools.tools.sleep(300);case 27:return t.next=29,Betools.query.queryTableData("bs_seal_regist",i);case 29:if(p=t.sent,p.finance_time=p.finance_time||A.finance_time,p.doc_time=p.doc_time||A.doc_time,!(u=!Betools.tools.isNull(p.finance_time)&&!Betools.tools.isNull(p.doc_time))){t.next=40;break}return t.next=36,Betools.tools.sleep(300);case 36:return t.next=38,e.handleMessage(o,d);case 38:t.next=47;break;case 40:return e.item.status=A.status,t.next=43,vant.Dialog.alert({title:"温馨提示",message:e.item.archiveType+"完成！"});case 43:return t.next=45,Betools.tools.sleep(1500);case 45:return t.next=47,e.handleMessage(o,d);case 47:return e.item.type="",f={id:Betools.tools.queryUniqueID(),table_name:"bs_seal_regist",main_value:i,proponents:s,business_data_id:i,business_code:"000000000",process_name:"用印流程审批",employee:n.realname,approve_user:n.username,action:"同意",action_opinion:"归档合同资料["+e.item.archiveType+"]",operate_time:dayjs().format("YYYY-MM-DD HH:mm:ss"),functions_station:n.position,process_station:"用印审批[印章管理]",business_data:l()(e.item),content:e.item.filename+" #经办人: "+e.item.username,process_audit:e.item.workno+"##"+e.item.serialid,create_time:dayjs().format("YYYY-MM-DD HH:mm:ss"),relate_data:"",origin_data:""},t.next=51,Betools.workflow.approveViewProcessLog(f);case 51:case"end":return t.stop()}},t,e)}))()},handleFinaly:function(){var e=this;return A()(m.a.mark(function t(){var n,a,o,r,s,c;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Betools.storage.getStore("system_userinfo");case 2:if(n=t.sent,!Betools.tools.isNull(n)){t.next=8;break}return vant.Toast("尚未登录！"),t.next=7,e.clearLoginInfo();case 7:e.$router.push("/login");case 8:return t.next=10,vant.Dialog.confirm({title:"用印资料归档",message:"请确认进行‘完成归档’并生成用印台账！"});case 10:return a=Betools.tools.getUrlParam("id"),o=e.item.username,r=dayjs().format("YYYY-MM-DD HH:mm:ss"),t.prev=13,t.next=16,Betools.manage.patchTableData("bs_seal_regist",a,{id:a,done_time:r});case 16:t.next=21;break;case 18:t.prev=18,t.t0=t.catch(13),console.log(t.t0);case 21:return t.next=23,Betools.query.queryTableData("bs_seal_regist",a);case 23:return s=t.sent,i()(s).map(function(e){s[e]=e.includes("_time")&&s[e]?dayjs(s[e]).format("YYYY-MM-DD HH:mm:ss"):s[e]}),t.prev=25,t.next=28,Betools.manage.postTableData("bs_seal_registed",s);case 28:t.next=33;break;case 30:t.prev=30,t.t1=t.catch(25),console.log(t.t1);case 33:return t.next=35,vant.Dialog.alert({title:"温馨提示",message:"用印归档完成，已生成台账！"});case 35:return e.item.type="",c={id:Betools.tools.queryUniqueID(),table_name:"bs_seal_regist",main_value:a,proponents:o,business_data_id:a,business_code:"000000000",process_name:"用印流程审批",employee:n.realname,approve_user:n.username,action:"同意",action_opinion:"归档合同资料完成[已归档]",operate_time:dayjs().format("YYYY-MM-DD HH:mm:ss"),functions_station:n.position,process_station:"用印审批[印章管理]",business_data:l()(e.item),content:e.item.filename+" #经办人: "+e.item.username,process_audit:e.item.workno+"##"+e.item.serialid,create_time:dayjs().format("YYYY-MM-DD HH:mm:ss"),relate_data:"",origin_data:""},t.next=39,Betools.workflow.approveViewProcessLog(c);case 39:case"end":return t.stop()}},t,e,[[13,18],[25,30]])}))()},handleMessage:function(e,t){var n=this;return A()(m.a.mark(function a(){var i,o,r,s,l,c;return m.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return i="合同编号",o=Betools.tools.getUrlParam("groupid")||"Group_LD",r=Betools.tools.getUrlParam("id"),s=n.item.username,a.next=6,Betools.query.queryTableData("bs_seal_regist",r);case 6:if(l=a.sent,c=encodeURIComponent(window.BECONFIG.domain.replace("www","wechat")+"/#/app/sealreceive?id="+r+"&type=done"),i="合同类"===n.item.sealtype?"合同编号":"流水编号",l.finance_time=l.finance_time||node.finance_time,l.doc_time=l.doc_time||l.doc_time,Betools.tools.isNull(l.finance_time)||Betools.tools.isNull(l.doc_time)){a.next=55;break}return a.prev=12,a.next=15,superagent.get(window.BECONFIG.restAPI+"/api/v1/mail/用印资料归档完成通知("+n.item.contractId+")/文件:‘"+n.item.filename+"’已归档，"+i+":"+n.item.contractId+"，编号："+r+"，经办人："+n.item.dealManager+"/"+e).set("accept","json");case 15:a.next=20;break;case 17:a.prev=17,a.t0=a.catch(12),console.log(a.t0);case 20:return a.prev=20,a.next=23,superagent.get(window.BECONFIG.restAPI+"/api/v1/weappms/"+s+"/文件:‘"+n.item.filename+"’已归档，"+i+":"+n.item.contractId+"，系统编号："+r+"，经办人："+n.item.dealManager+"?rurl="+c).set("accept","json");case 23:a.next=28;break;case 25:a.prev=25,a.t1=a.catch(20),console.log(a.t1);case 28:return a.prev=28,a.next=31,superagent.get(window.BECONFIG.restAPI+"/api/v1/wework/用印资料归档完成通知/文件:‘"+n.item.filename+"’已归档，"+i+":"+n.item.contractId+"，编号："+r+"，经办人："+n.item.dealManager+"，请完成归档台账生成!?type=front&rurl="+t+"&id="+r+"&userid="+n.item.dealManager).set("accept","json");case 31:a.next=36;break;case 33:a.prev=33,a.t2=a.catch(28),console.log(a.t2);case 36:return a.prev=36,a.next=39,superagent.get(window.BECONFIG.restAPI+"/api/v1/weappms/"+n.item.front+"/文件:‘"+n.item.filename+"’已归档，"+i+":"+n.item.contractId+"，编号："+r+"，经办人："+n.item.dealManager+"，请完成归档台账生成?rurl="+t).set("accept","json");case 39:a.next=44;break;case 41:a.prev=41,a.t3=a.catch(36),console.log(a.t3);case 44:return a.prev=44,a.next=47,Betools.manage.patchTableData("bs_seal_regist",r,{id:r,status:"已归档"});case 47:a.next=52;break;case 49:a.prev=49,a.t4=a.catch(44),console.log(a.t4);case 52:return n.item.status="已归档",a.next=55,vant.Dialog.alert({title:"温馨提示",message:"财务/档案归档完成，推送前台通知！"});case 55:case"end":return a.stop()}},a,n,[[12,17],[20,25],[28,33],[36,41],[44,49]])}))()}}}},"c/Tr":function(e,t,n){e.exports={default:n("5zde"),__esModule:!0}},fBQ2:function(e,t,n){"use strict";var a=n("evD5"),i=n("X8DO");e.exports=function(e,t,n){t in e?a.f(e,t,i(0,n)):e[t]=n}},goML:function(e,t,n){t=e.exports=n("FZ+f")(!0),t.push([e.i,"#explore .weui-cell__hd img{width:28px;margin-right:10px;display:block;border-radius:4px}#explore .home__notice{position:relative}#explore .home__notice img{width:30px;height:30px;vertical-align:middle;border-radius:4px}#explore .new-msg-dot{position:absolute;top:-4px;right:-5px;display:inline-block;width:9px;height:9px;border-radius:50%;background-color:red}#explore{margin-top:28px}.app-footer{display:block}.weui-cell_tab{height:30px;text-align:center;float:left;width:24.5%;margin:0}.wechat-list .list-info{position:relative;z-index:2;left:0;width:100%;height:64px;padding:8px;background-color:#fff}.wechat-list .list-info .header-box{position:relative;float:left;width:48px;height:48px;margin-right:10px;margin-left:0}.wechat-list .new-msg-count{font-style:normal;font-family:PingFang SC,Hiragino Sans GB,Arial,Microsoft YaHei,Helvetica;right:-9px;top:-5px;padding:0 4px;width:auto;min-width:18px;height:18px;line-height:18px;border-radius:9px;font-size:14px;background-color:#f43531}.wechat-list .new-msg-count,.wechat-list .new-msg-dot{position:absolute;z-index:2;color:#fff;text-align:center}.wechat-list .new-msg-dot{right:-4px;top:-3px;width:10px;height:10px;border-radius:50%;background-color:red;background-color:#f43531;font-size:0}.wechat-list .list-info .header-box .header{height:100%;border-radius:5px;display:-webkit-box;display:-ms-flexbox;display:flex;display:-webkit-flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-align:start;-webkit-align-items:flex-start;-ms-flex-align:start;align-items:flex-start;overflow:hidden;background:#dddbdb}.wechat-list .list-info .header-box .header img{width:10%;height:auto;-webkit-box-flex:2;-webkit-flex-grow:2;-ms-flex-positive:2;flex-grow:2;border:0}.wechat-list .list-info .desc-box{overflow:hidden}.wechat-list .list-info .desc-box .desc-time{float:right;color:#b8b8b8}.wechat-list .list-info .desc-box .desc-author{height:25px;line-height:25px;font-size:16px;color:#000}.wechat-list .list-info .desc-box .desc-msg{height:23px;line-height:23px;font-size:14px;color:#888}.wechat-list .list-info .desc-box .desc-msg .desc-mute{float:right;color:#b8b8b8}.van-goods-action{position:relative;right:0;bottom:0;left:0;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;box-sizing:content-box;height:50px;padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom);background-color:#fff;z-index:10}.van-goods-action-button--danger{background:-webkit-linear-gradient(left,#ff6034,#ee0a24);background:linear-gradient(90deg,#ff6034,#ee0a24);border-radius:0 10px 10px 0}.van-goods-action-button--warning{border-radius:10px 0 0 10px}","",{version:3,sources:["/Users/yunwisdom/Workspace/xdata-vuechat-service/src/assets/css/explore.css"],names:[],mappings:"AAAA,4BACI,WAAY,AACZ,kBAAmB,AACnB,cAAe,AACf,iBAAmB,CACtB,AAED,uBACI,iBAAkB,CACrB,AAED,2BACI,WAAY,AACZ,YAAa,AACb,sBAAuB,AACvB,iBAAmB,CACtB,AAED,sBACI,kBAAmB,AACnB,SAAU,AACV,WAAY,AACZ,qBAAsB,AACtB,UAAW,AACX,WAAY,AACZ,kBAAmB,AACnB,oBAAqB,CACxB,AAED,SACI,eAAiB,CACpB,AAED,YACI,aAAe,CAClB,AAED,eACI,YAAa,AACb,kBAAmB,AACnB,WAAY,AACZ,YAAa,AACb,QAAgB,CACnB,AAED,wBACI,kBAAmB,AACnB,UAAW,AACX,OAAQ,AACR,WAAY,AACZ,YAAa,AACb,YAAa,AACb,qBAAuB,CAC1B,AAED,oCACI,kBAAmB,AACnB,WAAY,AACZ,WAAY,AACZ,YAAa,AACb,kBAAmB,AACnB,aAAiB,CACpB,AAED,4BAEI,kBAAmB,AACnB,yEAA8E,AAC9E,WAAY,AACZ,SAAU,AAEV,cAAe,AACf,WAAY,AACZ,eAAgB,AAChB,YAAa,AACb,iBAAkB,AAClB,kBAAmB,AAGnB,eAAgB,AAChB,wBAA0B,CAC7B,AAED,sDAlBI,kBAAmB,AAKnB,UAAW,AAOX,WAAY,AACZ,iBAAmB,CAkBtB,AAbD,0BAEI,WAAY,AACZ,SAAU,AACV,WAAY,AACZ,YAAa,AAEb,kBAAmB,AAGnB,qBAAsB,AACtB,yBAA0B,AAC1B,WAAa,CAChB,AAED,4CACI,YAAa,AACb,kBAAmB,AACnB,oBAAqB,AACrB,oBAAqB,AACrB,aAAc,AACd,qBAAsB,AACtB,8BAA+B,AAC/B,6BAA8B,AAC9B,2BAA4B,AAC5B,uBAAwB,AACxB,mBAAoB,AACpB,uBAAwB,AACxB,mBAAoB,AACpB,eAAgB,AAChB,wBAAyB,AACzB,+BAAgC,AAChC,qBAAsB,AACtB,uBAAwB,AACxB,gBAAiB,AACjB,kBAAoB,CACvB,AAED,gDACI,UAAW,AACX,YAAa,AACb,mBAAoB,AACpB,oBAAqB,AACrB,oBAAqB,AACrB,YAAa,AACb,QAAU,CACb,AAED,kCACI,eAAiB,CACpB,AAED,6CACI,YAAa,AACb,aAAe,CAClB,AAED,+CACI,YAAa,AACb,iBAAkB,AAClB,eAAgB,AAChB,UAAY,CACf,AAED,4CACI,YAAa,AACb,iBAAkB,AAClB,eAAgB,AAChB,UAAY,CACf,AAED,uDACI,YAAa,AACb,aAAe,CAClB,AAED,kBACI,kBAAmB,AACnB,QAAS,AACT,SAAU,AACV,OAAQ,AACR,oBAAqB,AACrB,qBAAsB,AACtB,aAAc,AACd,yBAA0B,AAC1B,2BAA4B,AAC5B,mBAAoB,AACpB,uBAAwB,AACxB,YAAa,AACb,gDAAiD,AACjD,2CAA4C,AAC5C,sBAAuB,AACvB,UAAY,CACf,AAED,iCACI,yDAA4D,AAC5D,kDAAwD,AACxD,2BAAiC,CACpC,AAED,kCACI,2BAAiC,CACpC",file:"explore.css",sourcesContent:["#explore .weui-cell__hd img {\n    width: 28px;\n    margin-right: 10px;\n    display: block;\n    border-radius: 4px;\n}\n\n#explore .home__notice {\n    position: relative\n}\n\n#explore .home__notice img {\n    width: 30px;\n    height: 30px;\n    vertical-align: middle;\n    border-radius: 4px;\n}\n\n#explore .new-msg-dot {\n    position: absolute;\n    top: -4px;\n    right: -5px;\n    display: inline-block;\n    width: 9px;\n    height: 9px;\n    border-radius: 50%;\n    background-color: red\n}\n\n#explore {\n    margin-top: 28px;\n}\n\n.app-footer {\n    display: block;\n}\n\n.weui-cell_tab {\n    height: 30px;\n    text-align: center;\n    float: left;\n    width: 24.5%;\n    margin: 0px 0px;\n}\n\n.wechat-list .list-info {\n    position: relative;\n    z-index: 2;\n    left: 0;\n    width: 100%;\n    height: 64px;\n    padding: 8px;\n    background-color: #fff;\n}\n\n.wechat-list .list-info .header-box {\n    position: relative;\n    float: left;\n    width: 48px;\n    height: 48px;\n    margin-right: 10px;\n    margin-left: 0px;\n}\n\n.wechat-list .new-msg-count {\n    position: absolute;\n    font-style: normal;\n    font-family: PingFang SC, Hiragino Sans GB, Arial, Microsoft YaHei, Helvetica;\n    right: -9px;\n    top: -5px;\n    z-index: 2;\n    padding: 0 4px;\n    width: auto;\n    min-width: 18px;\n    height: 18px;\n    line-height: 18px;\n    border-radius: 9px;\n    color: #fff;\n    text-align: center;\n    font-size: 14px;\n    background-color: #f43531;\n}\n\n.wechat-list .new-msg-dot {\n    position: absolute;\n    right: -4px;\n    top: -3px;\n    width: 10px;\n    height: 10px;\n    z-index: 2;\n    border-radius: 50%;\n    color: #ffffff;\n    text-align: center;\n    background-color: red;\n    background-color: #f43531;\n    font-size: 0;\n}\n\n.wechat-list .list-info .header-box .header {\n    height: 100%;\n    border-radius: 5px;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    display: -webkit-flex;\n    -webkit-box-orient: horizontal;\n    -webkit-box-direction: normal;\n    -webkit-flex-direction: row;\n    -ms-flex-direction: row;\n    flex-direction: row;\n    -webkit-flex-wrap: wrap;\n    -ms-flex-wrap: wrap;\n    flex-wrap: wrap;\n    -webkit-box-align: start;\n    -webkit-align-items: flex-start;\n    -ms-flex-align: start;\n    align-items: flex-start;\n    overflow: hidden;\n    background: #dddbdb;\n}\n\n.wechat-list .list-info .header-box .header img {\n    width: 10%;\n    height: auto;\n    -webkit-box-flex: 2;\n    -webkit-flex-grow: 2;\n    -ms-flex-positive: 2;\n    flex-grow: 2;\n    border: 0;\n}\n\n.wechat-list .list-info .desc-box {\n    overflow: hidden;\n}\n\n.wechat-list .list-info .desc-box .desc-time {\n    float: right;\n    color: #b8b8b8;\n}\n\n.wechat-list .list-info .desc-box .desc-author {\n    height: 25px;\n    line-height: 25px;\n    font-size: 16px;\n    color: #000;\n}\n\n.wechat-list .list-info .desc-box .desc-msg {\n    height: 23px;\n    line-height: 23px;\n    font-size: 14px;\n    color: #888;\n}\n\n.wechat-list .list-info .desc-box .desc-msg .desc-mute {\n    float: right;\n    color: #b8b8b8;\n}\n\n.van-goods-action {\n    position: relative;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    display: -webkit-box;\n    display: -webkit-flex;\n    display: flex;\n    -webkit-box-align: center;\n    -webkit-align-items: center;\n    align-items: center;\n    box-sizing: content-box;\n    height: 50px;\n    padding-bottom: constant(safe-area-inset-bottom);\n    padding-bottom: env(safe-area-inset-bottom);\n    background-color: #fff;\n    z-index: 10;\n}\n\n.van-goods-action-button--danger {\n    background: -webkit-linear-gradient(left, #ff6034, #ee0a24);\n    background: linear-gradient(to right, #ff6034, #ee0a24);\n    border-radius: 0px 10px 10px 0px;\n}\n\n.van-goods-action-button--warning {\n    border-radius: 10px 0px 0px 10px;\n}"],sourceRoot:""}])},oxA2:function(e,t,n){t=e.exports=n("FZ+f")(!0),t.i(n("goML"),""),t.i(n("YntP"),""),t.i(n("NYaM"),""),t.push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"sealview.vue",sourceRoot:""}])},qyJz:function(e,t,n){"use strict";var a=n("+ZMJ"),i=n("kM2E"),o=n("sB3e"),r=n("msXi"),s=n("Mhyx"),l=n("QRG4"),c=n("fBQ2"),m=n("3fs2");i(i.S+i.F*!n("dY0y")(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,i,d,A=o(e),p="function"==typeof this?this:Array,u=arguments.length,f=u>1?arguments[1]:void 0,x=void 0!==f,g=0,b=m(A);if(x&&(f=a(f,u>2?arguments[2]:void 0,2)),void 0==b||p==Array&&s(b))for(t=l(A.length),n=new p(t);t>g;g++)c(n,g,x?f(A[g],g):A[g]);else for(d=b.call(A),n=new p;!(i=d.next()).done;g++)c(n,g,x?r(d,f,[i.value,g],!0):i.value);return n.length=g,n}})}});